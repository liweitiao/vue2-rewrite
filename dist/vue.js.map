{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observer/array.js","../src/observer/dep.js","../src/observer/index.js","../src/observer/scheduler.js","../src/observer/watcher.js","../src/state.js","../src/events.js","../src/vdom/patch.js","../src/lifecycle.js","../src/compiler/codegen/index.js","../src/compiler/parser/html-parser.js","../src/compiler/helpers.js","../src/compiler/parser/index.js","../src/compiler/index.js","../src/inject.js","../src/vdom/vnode.js","../src/vdom/helpers/resolve-async-component.js","../src/vdom/create-functional-component.js","../src/vdom/create-component.js","../src/vdom/create-element.js","../src/render-helpers.js","../src/render.js","../src/init.js","../src/global-api/index.js","../src/index.js"],"sourcesContent":["export function isFunction(val) {\r\n  return typeof val === 'function';\r\n}\r\n\r\nexport function isObject(val) {\r\n  return typeof val == 'object' && val !== null\r\n}\r\n\r\nconst _toString = Object.prototype.toString\r\n\r\nexport function isPlainObject(obj) {\r\n  return _toString.call(obj) === '[object Object]'\r\n}\r\n\r\nexport function isUndef(v) {\r\n  return v === undefined || v === null\r\n}\r\n\r\nexport function isDef(v) {\r\n  return v !== undefined && v !== null\r\n}\r\n\r\nexport function isPromise (val) {\r\n  return (\r\n    isDef(val) &&\r\n    typeof val.then === 'function' &&\r\n    typeof val.catch === 'function'\r\n  )\r\n}\r\n\r\nexport const noop = () => {}\r\n\r\nexport function isTrue(v) {\r\n  return v === true\r\n}\r\n\r\nexport function toArray (list) {\r\n  let i = list.length\r\n  const ret = new Array(i)\r\n  while (i--) {\r\n    ret[i] = list[i]\r\n  }\r\n  return ret\r\n}\r\n\r\nexport function once(fn) {\r\n  let called = false\r\n  return function() {\r\n    if (!called) {\r\n      called = true\r\n      fn.apply(this, arguments)\r\n    }\r\n  }\r\n}\r\n\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty\r\nexport function hasOwn(obj, key) {\r\n  return hasOwnProperty.call(obj, key)\r\n}\r\n\r\n\r\n\r\nconst callbacks = []\r\n\r\nfunction flushCallbacks() {\r\n  // console.log('utils---flushCallbacks---cbs--', callbacks)\r\n  callbacks.forEach(cb => {\r\n    // console.log('utils---flushCallbacks---cb---', cb)\r\n    cb()\r\n  })\r\n  waiting = false\r\n}\r\n\r\nlet waiting = false\r\n\r\nfunction timer(flushCallbacks) {\r\n  let timerFn = () => {}\r\n  if (Promise) {\r\n    timerFn = () => {\r\n      Promise.resolve().then(flushCallbacks)\r\n    }\r\n  } else if (MutationObserver) {\r\n    let textNode = document.createTextNode(1)\r\n    let observe = new MutationObserver(flushCallbacks)\r\n    observe.observe(textNode, {\r\n      characterData: true\r\n    })\r\n    timerFn = () => {\r\n      textNode.textContent = 3\r\n    }\r\n  } else if (setImmediate) {\r\n    timerFn = () => {\r\n      setImmediate(flushCallbacks)\r\n    }\r\n  } else {\r\n    timerFn = () => {\r\n      setTimeout(flushCallbacks)\r\n    }\r\n  }\r\n  timerFn()\r\n}\r\n\r\nexport function nextTick(cb) {\r\n  callbacks.push(cb)\r\n\r\n  if (!waiting) {\r\n    timer(flushCallbacks)\r\n    waiting = true\r\n  }\r\n}\r\n\r\nlet lifeCycleHooks = [\r\n  'beforeCreate',\r\n  'created',\r\n  'beforeMount',\r\n  'mounted',\r\n  'beforeUpdate',\r\n  'updated',\r\n  'beforeDestroy',\r\n  'destroyed',\r\n]\r\nlet strats = {}\r\n\r\nfunction mergeHook(parentVal, childVal) {\r\n  if (childVal) {\r\n    if (parentVal) {\r\n      return parentVal.concat(childVal)\r\n    } else {\r\n      return [childVal]\r\n    }\r\n  } else {\r\n    return parentVal\r\n  }\r\n}\r\n\r\nlifeCycleHooks.forEach(hook => {\r\n  strats[hook] = mergeHook\r\n})\r\n\r\nstrats.components = function(parentVal, childVal) {\r\n  // console.log('parentVal--childVal---', parentVal, childVal)\r\n  let options = Object.create(parentVal)\r\n  // console.log('utils--components---options--', options)\r\n  if (childVal) {\r\n    for (let key in childVal) {\r\n      options[key] = childVal[key]\r\n    }\r\n  }\r\n  return options\r\n}\r\n\r\nexport function mergeOptions(parent, child) {\r\n  const options = {}\r\n  for (let key in parent) {\r\n    mergeField(key)\r\n  }\r\n  for (let key in child) {\r\n    if (parent.hasOwnProperty(key)) {\r\n      continue\r\n    }\r\n    mergeField(key)\r\n  }\r\n\r\n  function mergeField(key) {\r\n    let parentVal = parent[key]\r\n    let childVal = child[key]\r\n    if (strats[key]) {\r\n      options[key] = strats[key](parentVal, childVal)\r\n    } else {\r\n      if (isObject(parentVal) && isObject(childVal)) {\r\n        options[key] = { ...parentVal, ...childVal }\r\n      } else {\r\n        options[key] = child[key] || parent[key]\r\n      }\r\n    }\r\n  }\r\n  return options\r\n}\r\n\r\nexport function isReservedTag(str) {\r\n  let reservedTag = 'a,div,span,p,img,button,ul,li,h1';\r\n  // 源码根据 “，” 生成映射表 {a:true,div:true,p:true}\r\n  return reservedTag.includes(str);\r\n}\r\n","let oldArrayPrototype = Array.prototype\r\n// console.log(oldArrayPrototype.length)\r\nexport let arrayMethods = Object.create(oldArrayPrototype)\r\n// let arrayMethods = Object.create(oldArrayPrototype)\r\n\r\nlet methods = [\r\n  'push',\r\n  'shift',\r\n  'unshift',\r\n  'pop',\r\n  'reverse',\r\n  'sort',\r\n  'splice'\r\n]\r\n\r\nmethods.forEach(method => {\r\n  arrayMethods[method] = function (...args) {\r\n    oldArrayPrototype[method].call(this, ...args)\r\n    let inserted\r\n    let ob = this.__ob__\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        // console.log('unshift')\r\n        inserted = args\r\n        break\r\n      case 'splice':\r\n        // console.log('splice')\r\n        inserted = args.slice(2)\r\n      default: \r\n        break\r\n    }\r\n    if (inserted) ob.observeArray(inserted)\r\n\r\n    ob.dep.notify()\r\n  }\r\n})","let id = 0\r\nclass Dep {\r\n  constructor() {\r\n    this.id = id++\r\n    this.subs = []\r\n  }\r\n  depend() {\r\n    if (Dep.target) {\r\n      // console.log('dep----depend---this---', this)\r\n      Dep.target.addDep(this)\r\n    }\r\n  }\r\n  addSub(watcher) {\r\n    this.subs.push(watcher)\r\n  }\r\n  notify() {\r\n    // console.log('dep----notify----')\r\n    this.subs.forEach(watcher => watcher.update())\r\n  }\r\n}\r\nDep.target = null\r\n\r\nlet stack = []\r\n\r\nexport function pushTarget(watcher) {\r\n  Dep.target = watcher\r\n  stack.push(watcher)\r\n  // console.log(stack)\r\n}\r\n\r\nexport function popTarget(watcher) {\r\n  // Dep.target = null\r\n  stack.pop()\r\n  Dep.target = stack[stack.length - 1]\r\n  // console.log('dep--popTarget--Dep.target---', Dep.target)\r\n}\r\n\r\nexport default Dep","import { isObject } from '../utils'\r\nimport { arrayMethods } from './array'\r\nimport Dep from './dep'\r\n\r\nclass Observer {\r\n  constructor(data) {\r\n    this.dep = new Dep()\r\n    Object.defineProperty(data, '__ob__', {\r\n      value: this,\r\n      enumerable: false\r\n    })\r\n\r\n    if (Array.isArray(data)) {\r\n      data.__proto__ = arrayMethods\r\n      this.observeArray(data)\r\n    } else {\r\n      this.walk(data)\r\n    }\r\n  }\r\n\r\n  observeArray(data) {\r\n    data.forEach(item => observe(item))\r\n  }\r\n\r\n  walk(data) {\r\n    Object.keys(data).forEach(key => {\r\n      defineReactive(data, key, data[key])\r\n    })\r\n  }\r\n}\r\n\r\nfunction dependArray(value) {\r\n  for (let i = 0; i < value.length; i++) {\r\n    let current = value[i]\r\n    current.__ob__ && current.__ob__.dep.depend()\r\n    if (Array.isArray(current)) {\r\n      dependArray(current)\r\n    }\r\n  }\r\n}\r\n\r\nexport function defineReactive(data, key, value) {\r\n  let childOb = observe(value)\r\n  // console.log('observer---key---value--childOb---', key, value, childOb)\r\n  let dep = new Dep()\r\n  // console.log('observer---key---dep---', key, dep)\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      // console.log('get--')\r\n      if (Dep.target) {\r\n        // console.log('observer---key---dep2---', key, dep)\r\n        dep.depend()\r\n        if (childOb) {\r\n          childOb.dep.depend()\r\n          if (Array.isArray(value)) {\r\n            dependArray(value)\r\n          }\r\n        }\r\n      }\r\n      return value\r\n    },\r\n    set(newValue) {\r\n      console.log('dep---newValue---', dep, newValue)\r\n      if (newValue !== value) {\r\n        observe(newValue)\r\n        value = newValue\r\n        // debugger\r\n        dep.notify()\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nexport function observe(data) {\r\n  if (!isObject(data)) {\r\n    return\r\n  }\r\n  if(data.__ob__) {\r\n    return data.__ob__\r\n  }\r\n\r\n  return new Observer(data)\r\n}","import { nextTick } from \"../utils\";\r\n\r\nlet queue = []\r\nlet has = {}\r\n\r\nfunction flushSchedulerQueue() {\r\n  for (let i = 0; i < queue.length; i++) {\r\n    queue[i].run()\r\n  }\r\n  queue = []\r\n  has = {}\r\n  pending = false\r\n}\r\n\r\n\r\nlet pending = false\r\n\r\nexport function queueWatcher(watcher) {\r\n  const id = watcher.id\r\n  if (has[id] == null) {\r\n    queue.push(watcher)\r\n    has[id] = true\r\n    if (!pending) {\r\n      nextTick(flushSchedulerQueue, 0)\r\n      pending = true\r\n    }\r\n  }\r\n}","import { popTarget, pushTarget } from \"./dep\";\r\nimport { queueWatcher } from './scheduler'\r\n\r\nlet id = 0\r\nclass Watcher {\r\n  constructor(vm, exprOrFn, cb, options) {\r\n    this.vm = vm\r\n    this.exprOrFn = exprOrFn\r\n    this.user = !!options.user\r\n    this.lazy = !!options.lazy\r\n    this.dirty = options.lazy\r\n    // console.log('dirty---', this.dirty)\r\n    this.cb = cb\r\n    this.options = options\r\n    this.id = id++\r\n    vm._watcher = this\r\n    // this.getter = exprOrFn\r\n\r\n    if (typeof exprOrFn == 'string') {\r\n      this.getter = function() {\r\n        let path = exprOrFn.split('.')\r\n        let obj = vm\r\n        for (let i = 0; i < path.length; i++) {\r\n          obj = obj[path[i]]\r\n        }\r\n        // console.log('watcher---obj---', obj)\r\n        // console.log('exprOrFn---', exprOrFn)\r\n        return obj\r\n      }\r\n    } else {\r\n      // console.log('exprOrFn---', exprOrFn)\r\n      this.getter = exprOrFn\r\n    }\r\n\r\n    // console.log('watcher--getter---', this.getter)\r\n    this.deps = []\r\n    this.depsId = new Set()\r\n    // this.get()\r\n    this.value = this.lazy ? undefined : this.get()\r\n    // this.value = this.get()\r\n  }\r\n  get() {\r\n    pushTarget(this)\r\n    const value = this.getter.call(this.vm)\r\n    popTarget()\r\n\r\n    // console.log('watcher--get---value---', value)\r\n    return value\r\n  }\r\n  update() {\r\n    if (this.lazy) {\r\n      this.dirty = true\r\n      // console.log('update----')\r\n    } else {\r\n      // console.log('update22----')\r\n      queueWatcher(this)\r\n    }\r\n  }\r\n  run() {\r\n    let newValue = this.get()\r\n    let oldValue = this.value\r\n    this.value = newValue\r\n    if (this.user) {\r\n      this.cb.call(this.vm, newValue, oldValue)\r\n    }\r\n    // console.log('watcher---run---')\r\n  }\r\n  addDep(dep) {\r\n    let id = dep.id\r\n    if (!this.depsId.has(id)) {\r\n      this.depsId.add(id)\r\n      this.deps.push(dep)\r\n      dep.addSub(this)\r\n    }\r\n  }\r\n  evaluate() {\r\n    this.dirty = false\r\n    // console.log('watcher----dirty---', this.dirty)\r\n    this.value = this.get()\r\n  }\r\n  depend() {\r\n    let i = this.deps.length\r\n    while (i--) {\r\n      this.deps[i].depend()\r\n    }\r\n  }\r\n}\r\n\r\nexport default Watcher","import { isFunction, noop } from './utils'\r\nimport { observe } from './observer/index'\r\nimport Watcher from \"./observer/watcher\";\r\nimport Dep from './observer/dep'\r\n\r\nexport function stateMixin(Vue) {\r\n  Vue.prototype.$watch = function (key, handler, options = {}) {\r\n    options.user = true\r\n    // console.log('state---$watch---this---', this)\r\n    new Watcher(this, key, handler, options)\r\n  }\r\n}\r\n\r\n\r\nexport function initState(vm) {\r\n  const opts = vm.$options\r\n  // console.log('state----opts---', opts)\r\n  if (opts.data) {\r\n    initData(vm)\r\n  }\r\n  if (opts.methods) {\r\n    initMethods(vm, opts.methods)\r\n  }\r\n  if (opts.watch) {\r\n    initWatch(vm, opts.watch)\r\n  }\r\n  if (opts.computed) {\r\n    initComputed(vm, opts.computed)\r\n  }\r\n}\r\n\r\nfunction proxy(vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[source][key]\r\n    },\r\n    set(newValue) {\r\n      vm[source][key] = newValue\r\n    }\r\n  })\r\n}\r\n\r\n\r\nfunction initData(vm) {\r\n  let data = vm.$options.data\r\n  data = vm._data = isFunction(data) ? data.call(vm) : data\r\n\r\n  for (let key in data) {\r\n    proxy(vm, '_data', key)\r\n  }\r\n\r\n  observe(data)\r\n}\r\n\r\nfunction initMethods(vm, methods) {\r\n  // console.log('initMethods---vm---methods---', vm, methods)\r\n  for (const key in methods) {\r\n    vm[key] = typeof methods[key] !== 'function' ? noop : methods[key].bind(vm)\r\n  }\r\n}\r\n\r\nfunction initWatch(vm, watch) {\r\n  for (let key in watch) {\r\n    let handler = watch[key]\r\n    // console.log('state---handler----', handler)\r\n    if (Array.isArray(handler)) {\r\n      for (let i = 0; i < handler.length; i++) {\r\n        createWatcher(vm, key, handler[i])\r\n      }\r\n    } else {\r\n      createWatcher(vm, key, handler)\r\n    }\r\n  }\r\n}\r\n\r\nfunction createWatcher(vm, key, handler) {\r\n  return vm.$watch(key, handler)\r\n}\r\n\r\nfunction initComputed(vm, computed) {\r\n  const watchers = vm._computedWatchers = {}\r\n  for (let key in computed) {\r\n    const userDef = computed[key]\r\n    let getter = typeof userDef == 'function' ? userDef : userDef.get\r\n\r\n    watchers[key] = new Watcher(vm, getter, () => {}, { lazy: true })\r\n\r\n    defineComputed(vm, key, userDef)\r\n  }\r\n}\r\n\r\nfunction createComputedGetter(key) {\r\n  // console.log('createComputed---')\r\n  return function computedGetter() {\r\n    let watcher = this._computedWatchers[key]\r\n    // console.log('state----createComputedGetter-key--watcher---',key, watcher)\r\n    if (watcher.dirty) {\r\n      watcher.evaluate()\r\n    }\r\n\r\n    // console.log('state----createComputed----Dep.target---', Dep.target)\r\n    if (Dep.target) {\r\n      watcher.depend()\r\n    }\r\n    return watcher.value\r\n  }\r\n  \r\n}\r\n\r\nfunction defineComputed(vm, key, userDef) {\r\n  let sharedProperty = {}\r\n  if (typeof userDef == 'function') {\r\n    sharedProperty.get = userDef\r\n  } else {\r\n    // sharedProperty.get = userDef.get\r\n    sharedProperty.get = createComputedGetter(key)\r\n    // sharedProperty.get()\r\n    sharedProperty.set = userDef.set\r\n  }\r\n  Object.defineProperty(vm, key, sharedProperty)\r\n}","/* @flow */\r\n\r\n// import {\r\n//   tip,\r\n//   toArray,\r\n//   hyphenate,\r\n//   formatComponentName,\r\n//   invokeWithErrorHandling\r\n// } from '../util/index'\r\n// import { updateListeners } from '../vdom/helpers/index'\r\nimport { toArray } from './utils'\r\n\r\n\r\nexport function initEvents (vm) {\r\n  vm._events = Object.create(null)\r\n}\r\n\r\nlet target\r\n\r\nfunction add (event, fn) {\r\n  target.$on(event, fn)\r\n}\r\n\r\nfunction remove (event, fn) {\r\n  target.$off(event, fn)\r\n}\r\n\r\nexport function eventsMixin (Vue) {\r\n  const hookRE = /^hook:/\r\n  Vue.prototype.$on = function (event, fn) {\r\n    console.log('$on----')\r\n    const vm = this\r\n    if (Array.isArray(event)) {\r\n      for (let i = 0, l = event.length; i < l; i++) {\r\n        vm.$on(event[i], fn)\r\n      }\r\n    } else {\r\n      (vm._events[event] || (vm._events[event] = [])).push(fn)\r\n    }\r\n    return vm\r\n  }\r\n\r\n  Vue.prototype.$once = function (event, fn) {\r\n    const vm = this\r\n    function on () {\r\n      vm.$off(event, on)\r\n      fn.apply(vm, arguments)\r\n    }\r\n    on.fn = fn\r\n    vm.$on(event, on)\r\n    return vm\r\n  }\r\n\r\n  Vue.prototype.$off = function (event, fn) {\r\n    const vm = this\r\n    if (!arguments.length) {\r\n      vm._events = Object.create(null)\r\n      return vm\r\n    }\r\n    // array of events\r\n    if (Array.isArray(event)) {\r\n      for (let i = 0, l = event.length; i < l; i++) {\r\n        vm.$off(event[i], fn)\r\n      }\r\n      return vm\r\n    }\r\n    // specific event\r\n    const cbs = vm._events[event]\r\n    if (!cbs) {\r\n      return vm\r\n    }\r\n    if (!fn) {\r\n      vm._events[event] = null\r\n      return vm\r\n    }\r\n    // specific handler\r\n    let cb\r\n    let i = cbs.length\r\n    while (i--) {\r\n      cb = cbs[i]\r\n      if (cb === fn || cb.fn === fn) {\r\n        cbs.splice(i, 1)\r\n        break\r\n      }\r\n    }\r\n    return vm\r\n  }\r\n\r\n  Vue.prototype.$emit = function (event) {\r\n    console.log('$emit----')\r\n    const vm = this\r\n    let cbs = vm._events[event]\r\n    if (cbs) {\r\n      cbs = cbs.length > 1 ? toArray(cbs) : cbs\r\n      const args = toArray(arguments, 1)\r\n      const info = `event handler for \"${event}\"`\r\n      for (let i = 0, l = cbs.length; i < l; i++) {\r\n        // invokeWithErrorHandling(cbs[i], vm, args, vm, info)\r\n        cbs[i].call(vm)\r\n      }\r\n    }\r\n    return vm\r\n  }\r\n}\r\n","import { isUndef } from \"../utils\";\r\n\r\nexport function patch(oldVnode, vnode) {\r\n    // console.log('patch----')\r\n    // debugger\r\n  if (!oldVnode) {\r\n      return createElm(vnode); // 如果没有el元素，那就直接根据虚拟节点返回真实节点\r\n  }\r\n\r\n  if (oldVnode.nodeType == 1) {\r\n      // 用vnode  来生成真实dom 替换原本的dom元素\r\n      const parentElm = oldVnode.parentNode; // 找到他的父亲\r\n      let elm = createElm(vnode); //根据虚拟节点 创建元素\r\n\r\n      // 在第一次渲染后 是删除掉节点，下次在使用无法获取\r\n      parentElm.insertBefore(elm, oldVnode.nextSibling);\r\n\r\n      parentElm.removeChild(oldVnode)\r\n\r\n      return elm\r\n  } else {\r\n      // 如果标签名称不一样 直接删掉老的换成新的即可\r\n      if (oldVnode.tag !== vnode.tag) {\r\n          // 可以通过vnode.el属性。获取现在真实的dom元素\r\n          return oldVnode.el.parentNode.replaceChild(createElm(vnode), oldVnode.el);\r\n      }\r\n\r\n      // 如果标签一样比较属性 , 传入新的新的虚拟节点 ，和老的属性 。用新的属性 更新老的\r\n      let el = vnode.el = oldVnode.el; // 表示当前新节点 复用老节点\r\n\r\n      // 如果两个虚拟节点是文本节点  比较文本内容 ...\r\n\r\n      if (vnode.tag == undefined) { // 新老都是文本\r\n          if (oldVnode.text !== vnode.text) {\r\n              el.textContent = vnode.text;\r\n          }\r\n          return;\r\n      }\r\n\r\n      patchProps(vnode, oldVnode.data)\r\n      // 属性可能有删除的情况\r\n\r\n      // 一方有儿子 ， 一方没儿子\r\n      let oldChildren = oldVnode.children || [];\r\n      let newChildren = vnode.children || [];\r\n\r\n      if (oldChildren.length > 0 && newChildren.length > 0) {\r\n          // 双方都有儿子\r\n\r\n          //  vue用了双指针的方式 来比对 \r\n          patchChildren(el, oldChildren, newChildren);\r\n      } else if (newChildren.length > 0) { // 老的没儿子 但是新的有儿子\r\n          for (let i = 0; i < newChildren.length; i++) {\r\n              let child = createElm(newChildren[i]);\r\n              el.appendChild(child); // 循环创建新节点\r\n          }\r\n\r\n      } else if (oldChildren.length > 0) { // 老的有儿子 新的没儿子\r\n          el.innerHTML = ``; // 直接删除老节点\r\n      }\r\n      // vue的特点是每个组件都有一个watcher，当前组件中数据变化 只需要更新当前组件\r\n      return el;\r\n  }\r\n}\r\n\r\nfunction isSameVnode(oldVnode, newVnode) {\r\n  return (oldVnode.tag == newVnode.tag) && (oldVnode.key == newVnode.key);\r\n}\r\n\r\n\r\n\r\n// dom的生成 ast => render方法 => 虚拟节点 => 真实dom\r\n// 更新时需要重新创建ast语法树吗？\r\n// 如果动态的添加了节点 （绕过vue添加的vue监控不到的） 难道不需要重新ast吗？\r\n// 后续数据变了，只会操作自己管理的dom元素\r\n// 如果直接操作dom 和 vue无关，不需要重新创建ast语法树\r\n\r\nfunction patchChildren(el, oldChildren, newChildren) {\r\n  let oldStartIndex = 0;\r\n  let oldStartVnode = oldChildren[0];\r\n  let oldEndIndex = oldChildren.length - 1;\r\n  let oldEndVnode = oldChildren[oldEndIndex];\r\n  let newStartIndex = 0;\r\n  let newStartVnode = newChildren[0];\r\n  let newEndIndex = newChildren.length - 1;\r\n  let newEndVnode = newChildren[newEndIndex];\r\n\r\n  const makeIndexByKey = (children)=>{\r\n      return children.reduce((memo,current,index)=>{\r\n          if(current.key){\r\n              memo[current.key] = index;\r\n          }\r\n          return memo;\r\n      },{})\r\n  }\r\n  const keysMap = makeIndexByKey(oldChildren);\r\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n      // 头头比较 尾尾比较 头尾比较 尾头比较\r\n      // 优化了 向后添加， 向前添加，尾巴移动到头部，头部移动到尾部 ，反转\r\n      if(!oldStartVnode){ // 已经被移动走了\r\n          oldStartVnode = oldChildren[++oldStartIndex];\r\n      }else if(!oldEndVnode){\r\n          oldEndVnode = oldChildren[--oldEndIndex];\r\n      }\r\n      // 同时循环新的节点和 老的节点，有一方循环完毕就结束了\r\n      if (isSameVnode(oldStartVnode, newStartVnode)) { // 头头比较，发现标签一致，\r\n          patch(oldStartVnode, newStartVnode);\r\n          oldStartVnode = oldChildren[++oldStartIndex];\r\n          newStartVnode = newChildren[++newStartIndex];\r\n      }else if(isSameVnode(oldEndVnode,newEndVnode)){ // 从尾部开始比较\r\n          patch(oldEndVnode,newEndVnode);\r\n          oldEndVnode = oldChildren[--oldEndIndex];\r\n          newEndVnode = newChildren[--newEndIndex];\r\n      } \r\n      // 头尾比较  =》 reverse\r\n      else if(isSameVnode(oldStartVnode,newEndVnode)){\r\n          patch(oldStartVnode,newEndVnode);\r\n          el.insertBefore(oldStartVnode.el,oldEndVnode.el.nextSibling); // 移动老的元素，老的元素就被移动走了，不用删除\r\n          oldStartVnode = oldChildren[++oldStartIndex];\r\n          newEndVnode = newChildren[--newEndIndex];\r\n      }\r\n      else if(isSameVnode(oldEndVnode,newStartVnode)){ // 尾头比较\r\n          patch(oldEndVnode,newStartVnode);\r\n          el.insertBefore(oldEndVnode.el,oldStartVnode.el);\r\n          oldEndVnode = oldChildren[--oldEndIndex];\r\n          newStartVnode = newChildren[++newStartIndex];\r\n      }else{\r\n          // 乱序比对   核心diff\r\n          // 1.需要根据key和 对应的索引将老的内容生成程映射表\r\n          let moveIndex = keysMap[newStartVnode.key]; // 用新的去老的中查找\r\n          if(moveIndex == undefined){ // 如果不能复用直接创建新的插入到老的节点开头处\r\n              el.insertBefore(createElm(newStartVnode),oldStartVnode.el);\r\n          }else{\r\n              let moveNode = oldChildren[moveIndex];\r\n              oldChildren[moveIndex] = null; // 此节点已经被移动走了\r\n              el.insertBefore(moveNode.el,oldStartVnode.el);\r\n              patch(moveNode,newStartVnode); // 比较两个节点的属性\r\n          }\r\n          newStartVnode = newChildren[++newStartIndex]\r\n      }\r\n  }\r\n  // 如果用户追加了一个怎么办？  \r\n\r\n  // 这里是没有比对完的\r\n  if (newStartIndex <= newEndIndex) {\r\n      for (let i = newStartIndex; i <= newEndIndex; i++) {\r\n          // el.appendChild(createElm(newChildren[i]))  \r\n          // insertBefore方法 他可以appendChild功能 insertBefore(节点,null)  dom api\r\n\r\n          //  看一下为指针的下一个元素是否存在\r\n          let anchor = newChildren[newEndIndex + 1] == null? null :newChildren[newEndIndex + 1].el\r\n          el.insertBefore(createElm(newChildren[i]),anchor);\r\n      }\r\n  }\r\n  if(oldStartIndex <= oldEndIndex){\r\n      for (let i = oldStartIndex; i <= oldEndIndex; i++) {\r\n          //  如果老的多 将老节点删除 ， 但是可能里面有null 的情况\r\n          if(oldChildren[i] !== null) el.removeChild(oldChildren[i].el);\r\n      }\r\n  }\r\n\r\n}\r\n// 创建真实节点的\r\nfunction patchProps(vnode, oldProps = {}) { // 初次渲染时可以调用此方法，后续更新也可以调用此方法\r\n  let newProps = vnode.data || {};\r\n  let el = vnode.el;\r\n  // 如果老的属性有，新的没有直接删除\r\n  let newStyle = newProps.style || {};\r\n  let oldStyle = oldProps.style || {};\r\n  for (let key in oldStyle) {\r\n      if (!newStyle[key]) { // 新的里面不存在这个样式\r\n          el.style[key] = '';\r\n      }\r\n  }\r\n  for (let key in oldProps) {\r\n      if (!newProps[key]) {\r\n          el.removeAttribute(key);\r\n      }\r\n  }\r\n  // 直接用新的生成到元素上\r\n  for (let key in newProps) {\r\n      if (key === 'style') {\r\n          for (let styleName in newProps.style) {\r\n              el.style[styleName] = newProps.style[styleName];\r\n          }\r\n      } else {\r\n        //   debugger\r\n          if (typeof newProps[key] === 'string') continue\r\n          el.setAttribute(key, newProps[key]);\r\n      }\r\n  }\r\n}\r\n\r\nfunction createComponent(vnode) {\r\n  let i = vnode.data; //  vnode.data.hook.init\r\n  if (i && (i = i.hook) && (i = i.init)) {\r\n      i(vnode); // 调用init方法\r\n  }\r\n  if (vnode.componentInstance) { // 有属性说明子组件new完毕了，并且组件对应的真实DOM挂载到了componentInstance.$el\r\n      return true;\r\n  }\r\n\r\n}\r\nexport function createElm(vnode) {\r\n  if (typeof vnode === 'string') {\r\n      return document.createTextNode(vnode)\r\n  }\r\n  if (isUndef(vnode)) {\r\n      return document.createTextNode('')\r\n  }\r\n//   debugger\r\n  let { tag, data, children, text, context } = Array.isArray(vnode) ? vnode[0] : vnode\r\n  if (typeof tag === 'string') { // 元素\r\n      if (createComponent(vnode)) {\r\n          // 返回组件对应的真实节点\r\n          return vnode.componentInstance.$el;\r\n      }\r\n      vnode.el = document.createElement(tag); // 虚拟节点会有一个el属性 对应真实节点\r\n      patchProps(vnode);\r\n      children.forEach(child => {\r\n          vnode.el.appendChild(createElm(child))\r\n      });\r\n  } else {\r\n    //   debugger\r\n      vnode.el = document.createTextNode(text);\r\n  }\r\n  return vnode.el\r\n}\r\n","import { patch } from \"./vdom/patch\";\r\nimport Watcher from './observer/watcher'\r\nimport { nextTick } from \"./utils\";\r\n\r\nexport function lifecycleMixin(Vue) {\r\n  Vue.prototype._update = function(vnode) {\r\n    const vm = this\r\n    // debugger\r\n    const prevEl = vm.$el // previously 先前\r\n    const prevVnode = vm._vnode\r\n    vm._vnode = vnode\r\n    // debugger\r\n    if (!prevVnode) {\r\n      vm.$el = patch(vm.$el, vnode)\r\n    } else {\r\n      vm.$el = patch(prevVnode, vnode)\r\n    }\r\n  }\r\n  Vue.prototype.$nextTick = nextTick\r\n\r\n  Vue.prototype.$forceUpdate = function () {\r\n    // debugger\r\n    const vm = this\r\n    if (vm._watcher) {\r\n      vm._watcher.update()\r\n    }\r\n  }\r\n}\r\n\r\nexport function initLifecycle(vm) {\r\n  const options = vm.$options\r\n\r\n  // locate first non-abstract parent\r\n  let parent = options.parent\r\n  if (parent && !options.abstract) {\r\n      while (parent.$options.abstract && parent.$parent) {\r\n          parent = parent.$parent\r\n      }\r\n      parent.$children.push(vm)\r\n  }\r\n\r\n  vm.$parent = parent\r\n  vm.$root = parent ? parent.$root : vm\r\n\r\n  vm.$children = []\r\n  vm.$refs = {}\r\n\r\n  vm._watcher = null\r\n  vm._inactive = null\r\n  vm._directInactive = false\r\n  vm._isMounted = false\r\n  vm._isDestroyed = false\r\n  vm._isBeingDestroyed = false\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n  let updateComponent = () => {\r\n    let vnode = vm._render()\r\n    console.log('lifecycle----mountComponent----vnode----', vnode)\r\n    // debugger\r\n    vm._update(vnode)\r\n  }\r\n\r\n  callHook(vm, 'beforeMount')\r\n  new Watcher(vm, updateComponent, () => {\r\n    console.log('视图更新了！')\r\n  }, true)\r\n  // updateComponent()\r\n  callHook(vm, 'mounted')\r\n}\r\n\r\nexport function callHook(vm,hook){\r\n  let handlers = vm.$options[hook];\r\n  if(handlers){\r\n      for(let i =0; i < handlers.length;i++){\r\n          handlers[i].call(vm)\r\n      }\r\n  }\r\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{aaaaa}}\r\n\r\n\r\n// html字符串 =》 字符串  _c('div',{id:'app',a:1},'hello')\r\n\r\nfunction genProps(attrs) { // [{name:'xxx',value:'xxx'},{name:'xxx',value:'xxx'}]\r\n    let str = '';\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        let attr = attrs[i];\r\n        if (attr.name === 'style') { // color:red;background:blue\r\n            let styleObj = {};\r\n            attr.value.replace(/([^;:]+)\\:([^;:]+)/g, function() {\r\n                styleObj[arguments[1]] = arguments[2]\r\n            })\r\n            attr.value = styleObj\r\n        }\r\n        if (attr.name === 'v-if') {\r\n            console.log('codegen---genProps----attr.name---', attr.name)\r\n            continue\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},`;\r\n    }\r\n    return `{${str.slice(0,-1)}}`\r\n}\r\n\r\nfunction gen(el) {\r\n    if (el.type == 1) { // element = 1 text = 3\r\n        return generate(el);\r\n    } else {\r\n        let text = el.text;\r\n        if (!defaultTagRE.test(text)) {\r\n            return `_v('${text}')`;\r\n        } else {\r\n            // 'hello' + arr + 'world'    hello {{arr}} {{aa}} world\r\n            let tokens = [];\r\n            let match;\r\n            let lastIndex = defaultTagRE.lastIndex = 0; // CSS-LOADER 原理一样\r\n            while (match = defaultTagRE.exec(text)) { // 看有没有匹配到\r\n                let index = match.index; // 开始索引\r\n                if (index > lastIndex) {\r\n                    tokens.push(JSON.stringify(text.slice(lastIndex, index)))\r\n                }\r\n                tokens.push(`_s(${match[1].trim()})`); // JSON.stringify()\r\n                lastIndex = index + match[0].length;\r\n            }\r\n            if (lastIndex < text.length) {\r\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n            }\r\n            return `_v(${tokens.join('+')})`\r\n        }\r\n    }\r\n}\r\n\r\nfunction genChildren(el) {\r\n    let children = el.children; // 获取儿子\r\n    if (children) {\r\n        return children.map(c => gen(c)).join(',')\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction genData(el) {\r\n    let data = '{'\r\n    if (el.slotTarget) {\r\n        data += `slot:${el.slotTarget}`\r\n    }\r\n    data += '}'\r\n\r\n    return data\r\n}\r\n\r\nfunction genSlot(el) {\r\n    var slotName = el.slotName || '\"default\"'\r\n    var children = genChildren(el)\r\n    var res = \"_t(\" + slotName + (children ? (\",function(){return \" + children + \"}\") : '')\r\n    // TODO...\r\n    // var attrs = el.attrs || el.dynamicAttrs\r\n\r\n    res += ')'\r\n    // debugger\r\n    return res\r\n}\r\n\r\nfunction genIf(el) {\r\n    return `(${el.attrsMap['v-if']})?_c('${el.tag}',${genProps(el.attrs)},${genChildren(el)}):_e()`\r\n}\r\n\r\nexport function generate(el) { //  _c('div',{id:'app',a:1},_c('span',{},'world'),_v())\r\n    // 遍历树 将树拼接成字符串\r\n    const code = el ? genElement(el) : '_c(\"div\")'\r\n    return code;\r\n}\r\n\r\nexport function genElement(el) { //  _c('div',{id:'app',a:1},_c('span',{},'world'),_v())\r\n    // 遍历树 将树拼接成字符串\r\n    let data\r\n    if (!el.plain) {\r\n        data = genData(el)\r\n    }\r\n    for (let i = 0; i < el.attrs.length; i++) {\r\n        el.attrsMap[el.attrs[i]['name']] = el.attrs[i]['value']\r\n    }\r\n    // debugger\r\n    if (el.attrsMap['v-if']) {\r\n        // debugger\r\n        return genIf(el)\r\n    } else if (el.tag === 'slot') {\r\n        return genSlot(el)\r\n    } else {\r\n        let children = genChildren(el);\r\n        // debugger\r\n        let code = `_c('${el.tag}',${\r\n            el.attrs.length? genProps(el.attrs): 'undefined'\r\n        }${\r\n            children? `,${children}`:''\r\n        })`;\r\n\r\n        return code;\r\n    }\r\n}","\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名 \r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  用来获取的标签名的 match后的索引为1的\r\n\r\n// console.log('<aa:bbb>'.match(new RegExp(qnameCapture)))\r\n\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 匹配开始标签的 \r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配闭合标签的\r\n//           aa  =   \"  xxx \"  | '  xxxx '  | xxx\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // a=b  a=\"b\"  a='b'\r\nconst startTagClose = /^\\s*(\\/?)>/; //     />   <div/>\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{aaaaa}}\r\n\r\nexport function parseHTML(html, options) {\r\n\r\n  function advance(len) {\r\n    html = html.substring(len);\r\n  }\r\n\r\n  function parseStartTag() {\r\n      const start = html.match(startTagOpen);\r\n      // debugger\r\n      if (start) {\r\n          const match = {\r\n              tagName: start[1],\r\n              attrs: []\r\n          }\r\n          advance(start[0].length);\r\n          let end;\r\n          // 如果没有遇到标签结尾就不停的解析\r\n          let attr;\r\n\r\n          while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n            // debugger  \r\n            match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] })\r\n              advance(attr[0].length)\r\n          }\r\n          if (end) {\r\n              advance(end[0].length);\r\n          }\r\n          return match;\r\n      }\r\n      return false; // 不是开始标签\r\n  }\r\n\r\n  while (html) {\r\n    let textEnd = html.indexOf('<')\r\n    if (textEnd == 0) {\r\n      const startTagMatch = parseStartTag(html)\r\n      // debugger\r\n      if (startTagMatch) {\r\n          options.start(startTagMatch.tagName, startTagMatch.attrs)\r\n          continue;\r\n      }\r\n      const endTagMatch = html.match(endTag);\r\n      if (endTagMatch) {\r\n        // debugger\r\n        options.end(endTagMatch[1]);\r\n          advance(endTagMatch[0].length);\r\n          continue;\r\n      }\r\n    }\r\n    let text; // //  </div>\r\n    if (textEnd > 0) {\r\n        text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n        options.chars(text);\r\n        advance(text.length);\r\n    }\r\n  }\r\n}","export function addAttr (el, name, value, dynamic) {\r\n  const attrs = dynamic\r\n    ? (el.dynamicAttrs || (el.dynamicAttrs = []))\r\n    : (el.attrs || (el.attrs = []))\r\n  attrs.push({ name, value, dynamic })\r\n  el.plain = false\r\n}\r\n\r\nexport function getRawBindingAttr (el, name) {\r\n  return el.rawAttrsMap[':' + name] ||\r\n    el.rawAttrsMap['v-bind:' + name] ||\r\n    el.rawAttrsMap[name]\r\n}","\r\n// // 看一下用户是否传入了 , 没传入可能传入的是 template, template如果也没有传递\r\n// // 将我们的html =》 词法解析  （开始标签 ， 结束标签，属性，文本）\r\n// // => ast语法树 用来描述html语法的 stack=[]\r\n\r\n// // codegen  <div>hello</div>  =>   _c('div',{},'hello')  => 让字符串执行\r\n// // 字符串如果转成代码 eval 好性能 会有作用域问题\r\n\r\n// // 模板引擎 new Function + with 来实现\r\n\r\nimport { parseHTML } from './html-parser'\r\nimport { addAttr } from '../helpers'\r\n\r\nexport function createAstElement(tagName, attrs) {\r\n    return {\r\n        tag: tagName,\r\n        type: 1,\r\n        children: [],\r\n        parent: null,\r\n        attrs\r\n    }\r\n}\r\n\r\nexport function parse(template, options) {\r\n    let root\r\n    let currentParent\r\n    const stack = []\r\n\r\n    function closeElement(element) {\r\n        // processElement(element)\r\n        // debugger\r\n        element = processElement(element)\r\n        // processSlotContent(el)\r\n        // currentParent || currentParent.children.push(element)\r\n        element.parent = currentParent\r\n        // debugger\r\n        // return element\r\n    }\r\n\r\n\r\n\r\n    function processElement(element) {\r\n        processSlotContent(element)\r\n        processSlotOutlet(element)\r\n        // debugger\r\n        return element\r\n    }\r\n\r\n    function processSlotOutlet(el) {\r\n        if (el.tag === 'slot') {\r\n            // debugger\r\n            el.slotName = `\"${getBindingAttr(el, 'name')}\"`\r\n        }\r\n    }\r\n\r\n    function getBindingAttr(el, name) {\r\n        let slotTarget = el.attrs[0] && el.attrs[0]['value']\r\n        return slotTarget\r\n    }\r\n\r\n\r\n    function processSlotContent(el) {\r\n        // debugger\r\n        var slotTarget = getBindingAttr(el, 'slot')\r\n        if (slotTarget) {\r\n            el.slotTarget = slotTarget === '\"\"' ? '\"default\"' : slotTarget\r\n            el.attrsMap = el.attrsMap || {}\r\n            el.attrsMap['slot'] = slotTarget\r\n            el.slotTargetDynamic = !!(el.attrsMap[':slot'] || el.attrsMap['v-bind:slot'])\r\n            if (!el.slotScope) {\r\n                addAttr(el, 'slot', slotTarget, getBindingAttr(el, 'slot'))\r\n            }\r\n        }\r\n    }\r\n\r\n    parseHTML(template, {\r\n         start(tagName, attributes) {\r\n            let parent = stack[stack.length - 1];\r\n            let element = createAstElement(tagName, attributes);\r\n            if (!root) {\r\n                root = element;\r\n            }\r\n            if (parent) {\r\n                element.parent = parent; // 当放入栈中时 继续父亲是谁\r\n                parent.children.push(element)\r\n            }\r\n            stack.push(element);\r\n        },\r\n    \r\n        end(tagName) {\r\n            const element = stack[stack.length - 1];\r\n            stack.length -= 1\r\n            currentParent = stack[stack.length - 1]\r\n            if (element.tag !== tagName) {\r\n                throw new Error('标签有误');\r\n            }\r\n            // debugger\r\n            closeElement(element)\r\n            // debugger\r\n        },\r\n    \r\n        chars(text) {\r\n            text = text.replace(/\\s/g, \"\");\r\n            let parent = stack[stack.length - 1];\r\n            if (text) {\r\n                parent.children.push({\r\n                    type: 3,\r\n                    text\r\n                })\r\n            }\r\n        }\r\n    })\r\n\r\n    return root\r\n}\r\n\r\n","import { generate } from './codegen/index';\r\nimport {parse} from './parser/index';\r\n\r\nexport function compileToFunction(template) {\r\n    let root = parse(template)\r\n    console.log('compiler----root----', root)\r\n    // 生成代码 \r\n    let code = generate(root)\r\n    console.log('compiler----code---', code)\r\n    let render = new Function(`with(this){return ${code}}`); // code 中会用到数据 数据在vm上\r\n    console.log('compiler----render----', render)\r\n    return render;\r\n    // render(){\r\n    //     return\r\n    // }\r\n    // html=> ast（只能描述语法 语法不存在的属性无法描述） => render函数 + (with + new Function) => 虚拟dom （增加额外的属性） => 生成真实dom\r\n}\r\n","import { hasOwn } from './utils'\r\nimport { defineReactive } from './observer/index'\r\n\r\nexport function initProvide(vm) {\r\n  const provide = vm.$options.provide\r\n  // console.log('inject----provide--', provide)\r\n  if (provide) {\r\n    vm._provided = typeof provide === 'function' ? provide.call(vm) : provide\r\n  }\r\n}\r\n\r\n\r\nexport function initInjections(vm) {\r\n  const result = resolveInject(vm.$options.inject, vm)\r\n  // console.log('inject---initInjections---result---', result)\r\n  if (result) {\r\n    Object.keys(result).forEach(key => {\r\n      defineReactive(vm, key, result[key])\r\n    })\r\n  }\r\n}\r\n\r\nexport function resolveInject(inject, vm) {\r\n  // debugger\r\n  if (inject) {\r\n    const result = Object.create(null)\r\n    // const keys = Object.keys(inject)\r\n    const keys = Reflect.ownKeys(inject)\r\n    // console.log('inject----resolveInject----result---', keys)\r\n\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i]\r\n      if (key === '__ob__') continue\r\n      const provideKey = inject[key]\r\n      let source = vm\r\n      while (source) {\r\n        if (source._provided && hasOwn(source._provided, provideKey)) {\r\n          result[inject[key]] = source._provided[provideKey]\r\n          break\r\n        }\r\n        source = source.$parent\r\n      }\r\n      if (!source) {\r\n        // console.log('inject---key---', inject, key)\r\n        if (key !== 'length' && 'default' in inject[key]) {\r\n          const provideDefault = inject[key].default\r\n          result[key] = typeof provideDefault === 'function'\r\n            ? provideDefault.call(vm)\r\n            : provideDefault\r\n        }\r\n      }\r\n    }\r\n\r\n    return result\r\n  }\r\n}","export default class VNode {\r\n  constructor(context, tag, data, key, children, text, componentOptions) {\r\n    this.context = context\r\n    this.tag = tag\r\n    this.data = data\r\n    this.key = key\r\n    this.children = children\r\n    this.text = text\r\n    this.componentOptions = componentOptions\r\n  }\r\n}\r\n\r\nexport const createEmptyVNode = (text = '') => {\r\n  const node = new VNode()\r\n  node.text = text\r\n  node.isComment = true\r\n\r\n  return node\r\n}","import { currentRenderingInstance } from '../../render'\r\nimport { isDef, once, isObject, isPromise, isUndef } from '../../utils';\r\nimport { createEmptyVNode } from '../vnode'\r\n\r\nfunction ensureCtor(comp, base) {\r\n  return isObject(comp) ? base.extend(comp) : comp\r\n}\r\n\r\nexport function createAsyncPlaceholder (factory, data, context, children, tag) {\r\n  const node = createEmptyVNode()\r\n  node.asyncFactory = factory\r\n  node.asyncMeta = { data, context, children, tag }\r\n\r\n  return node\r\n}\r\n\r\nexport function resolveAsyncComponent(factory, baseCtor) {\r\n  \r\n  // debugger\r\n  console.log('resolveAsyncComponent--factory--baseCtor---', factory, baseCtor)\r\n  \r\n  if (isDef(factory.resolved)) {\r\n    return factory.resolved\r\n  }\r\n  \r\n  var owner = currentRenderingInstance\r\n\r\n  if (owner && !isDef(factory.owners)) {\r\n    console.log('resolveAsyncComponent----owner---')\r\n    // debugger\r\n    const owners = factory.owners = [owner]\r\n    let sync = true\r\n    let timerLoading = null\r\n    let timerTimeout = null\r\n\r\n    const forceRender = (renderCompleted) => {\r\n      for (let i = 0, l = owners.length; i < l; i++) {\r\n        (owners[i]).$forceUpdate()\r\n      }\r\n\r\n      if (renderCompleted) {\r\n        owners.length = 0\r\n        if (timerLoading !== null) {\r\n          clearTimeout(timerLoading)\r\n          timerLoading = null\r\n        }\r\n        if (timerTimeout !== null) {\r\n          clearTimeout(timerTimeout)\r\n          timerTimeout = null\r\n        }\r\n      }\r\n    }\r\n\r\n    const resolve = once((res) => {\r\n      console.log('res----', res)\r\n      // debugger\r\n      factory.resolved = ensureCtor(res, baseCtor)\r\n      if (!sync) {\r\n        forceRender(true)\r\n      } else {\r\n        owners.length = 0\r\n      }\r\n    })\r\n\r\n    const reject = once(reason => {\r\n      process.env.NODE_ENV !== 'production' && warn(\r\n        `Failed to resolve async component: ${String(factory)}` +\r\n        (reason ? `\\nReason: ${reason}` : '')\r\n      )\r\n    })\r\n\r\n    // debugger\r\n    const res = factory(resolve, reject)\r\n    // debugger\r\n\r\n\r\n    if(isObject(res)) {\r\n      if (isPromise(res)) {\r\n        if (isUndef(factory.resolved)) {\r\n          res.then(resolve, reject)\r\n        }\r\n      }\r\n    }\r\n\r\n    sync = false\r\n    return factory.loading\r\n      ? factory.loadingComp\r\n      : factory.resolved\r\n  }\r\n}","import { hasOwn } from \"../utils\";\r\nimport { createComponent } from \"./create-component\";\r\nimport VNode from \"./vnode\";\r\nimport { createElement } from \"./create-element\";\r\n\r\nfunction FunctionalRenderContext(data, children, parent, Ctor) {\r\n\r\n  // debugger\r\n  const options = Ctor.options\r\n  let contextVm\r\n  if (hasOwn(parent, '_uid')) {\r\n    contextVm = Object.create(parent)\r\n    contextVm._original = parent\r\n  } else {\r\n    contextVm = parent\r\n    parent = parent._original\r\n  }\r\n\r\n  this.data = data\r\n  this.children = children\r\n  this.parent = parent\r\n  this._c = (a, b, c, d) => createElement(contextVm, a, b, c, d)\r\n}\r\n\r\nexport function createFunctionalComponent(Ctor, data, contextVm, children) {\r\n  // debugger\r\n  const options = Ctor.options\r\n\r\n  const renderContext = new FunctionalRenderContext(data, children, contextVm, Ctor)\r\n  // debugger\r\n  const vnode = options.render.call(null, renderContext._c, renderContext)\r\n  // debugger\r\n  if (vnode instanceof VNode) {\r\n    return vnode\r\n  }\r\n}","import {  isObject, isUndef, isTrue } from \"../utils\"\r\nimport VNode from \"./vnode\";\r\nimport { resolveAsyncComponent, createAsyncPlaceholder } from './helpers/index'\r\nimport { createEmptyVNode } from './vnode'\r\nimport { createElement } from './create-element'\r\nimport { createFunctionalComponent } from \"./create-functional-component\";\r\n\r\nexport function createComponent(context, tag, data, key, children, Ctor) {\r\n  // debugger\r\n  if (isUndef(Ctor)) {\r\n    return createElement(context, tag, data, children)\r\n  }\r\n\r\n  const baseCtor = context.$options._base\r\n  if (isObject(Ctor)) {\r\n    Ctor = baseCtor.exend(Ctor)\r\n  }\r\n\r\n  var asyncFactory\r\n  if (isUndef(Ctor.cid)) {\r\n\r\n    // console.log('Ctor.cid---', Ctor.toString())\r\n    // debugger\r\n    asyncFactory = Ctor\r\n    Ctor = resolveAsyncComponent(asyncFactory, baseCtor)\r\n    // debugger\r\n    if (Ctor === undefined) {\r\n      return createAsyncPlaceholder(\r\n        asyncFactory,\r\n        data,\r\n        context,\r\n        children,\r\n        tag\r\n      )\r\n    }\r\n  }\r\n\r\n  if (isTrue(Ctor.options.functional)) {\r\n    // debugger\r\n    return createFunctionalComponent(Ctor, data, context, children)\r\n  }\r\n\r\n  // debugger\r\n  // data.hook = {\r\n  //   init(vnode) {\r\n  //     console.log('init----vnode---', vnode)\r\n  //     let child = vnode.componentInstance = new Ctor({_isComponent: true, parent: context, _parentVnode: vnode})\r\n\r\n  //     child.$mount()\r\n  //   }\r\n  // }\r\n  installComponentHooks(data)\r\n  console.log('createComponent---data---', data)\r\n\r\n  const vnode = new VNode(context, `vue-component-${tag}`, data, key, undefined, undefined, {Ctor, children})\r\n  return vnode\r\n}\r\n\r\n\r\nconst componentVNodeHooks = {\r\n  init (vnode) {\r\n    if (vnode.componentInstance) {\r\n\r\n    } else {\r\n      const child = vnode.componentInstance = createComponentInstanceForVnode(vnode)\r\n      \r\n      child.$mount()\r\n    }\r\n  }\r\n}\r\n\r\nconst hooksToMerge = Object.keys(componentVNodeHooks)\r\n\r\nfunction createComponentInstanceForVnode(vnode) {\r\n  const options = {\r\n    _isComponent: true,\r\n    _parentVnode: vnode,\r\n    parent: vnode.context\r\n  }\r\n\r\n  return new vnode.componentOptions.Ctor(options)\r\n}\r\n\r\nfunction installComponentHooks(data) {\r\n  const hooks = data.hook || (data.hook = {})\r\n  for (let i = 0; i < hooksToMerge.length; i++) {\r\n    const key = hooksToMerge[i]\r\n    const value = componentVNodeHooks[key]\r\n    hooks[key] = value\r\n  }\r\n}","import VNode from './vnode'\r\nimport { createComponent } from './create-component'\r\nimport { isReservedTag, isObject } from \"../utils\"\r\n\r\nexport function createElement (context, tag, data = {}, ...children) {\r\n  // TODO...\r\n\r\n  return _createElement(context, tag, data, children)\r\n}\r\n\r\nexport function _createElement(context, tag, data, children) {\r\n  let vnode\r\n  if (isReservedTag(tag)) {\r\n    vnode = new VNode(context, tag, data, data.key, children, undefined)\r\n  } else {\r\n    const Ctor = context.$options.components[tag]\r\n    vnode = createComponent(context, tag, data, data.key, children, Ctor)\r\n    return vnode\r\n  }\r\n  \r\n  return vnode\r\n}\r\n\r\nexport function createTextElement(context, text) {\r\n  return new VNode(context, undefined, undefined, undefined, undefined, text)\r\n}","// import { createElement, createTextElement } from \"./vdom/index\"\r\nimport { createElement, createTextElement } from './vdom/create-element'\r\nimport { createEmptyVNode } from './vdom/vnode';\r\n\r\nexport function installRenderHelpers (target) {\r\n  target._c = function() {\r\n    return createElement(this, ...arguments)\r\n  }\r\n\r\n  target._v = function (text) {\r\n    return createTextElement(this, text)\r\n  }\r\n\r\n  target._s = function(val) {\r\n    if (typeof val === 'object') return JSON.stringify(val)\r\n    return val\r\n  }\r\n\r\n  target._t = function(name) {\r\n    let nodes\r\n    // debugger\r\n    nodes = this.$slots[name]\r\n    return nodes\r\n  }\r\n\r\n  target._e = function(name) {\r\n    return createEmptyVNode(name)\r\n  }\r\n}\r\n\r\nexport function resolveSlots(children, context) {\r\n  if (!children || !children.length) {\r\n    return {}\r\n  }\r\n  // debugger\r\n  const slots = {}\r\n  for (let i = 0, l = children.length; i < l; i++) {\r\n    const child = children[i]\r\n    const data = child ? child.data : {}\r\n    // if (data && data.slot) {\r\n    //   delete data.slot\r\n    // }\r\n\r\n    if (data && data.slot != null) {\r\n      const name = data.slot\r\n      const slot = (slots[name] || (slots[name] = []))\r\n      slot.push(child)\r\n    } else {\r\n      (slots.default || (slots.default = [])).push(child)\r\n    }\r\n  }\r\n\r\n  return slots\r\n}","\r\nimport { installRenderHelpers, resolveSlots } from './render-helpers'\r\nimport { createElement } from './vdom/create-element'\r\n\r\n\r\nexport function initRender(vm) {\r\n  vm._vnode = null\r\n  // debugger\r\n  const options = vm.$options\r\n  const parentVnode = vm.$vnode = options._parentVnode\r\n  // const renderContext = parentVnode && parentVnode.context\r\n  // change...FIXME...\r\n  const renderContext = vm && vm.$parent\r\n  vm.$slots = resolveSlots(options._renderChildren, renderContext)\r\n\r\n  vm.$createElement = (a, b, c, d) => createElement(vm, a, b, c, d)\r\n}\r\n\r\nexport let currentRenderingInstance = null\r\n\r\nexport function renderMixin(Vue) {\r\n  // console.log('renderMixin---')\r\n installRenderHelpers(Vue.prototype)\r\n\r\n  Vue.prototype._render = function () {\r\n    const vm = this\r\n    const { render, _parentVnode } = vm.$options\r\n    vm.$vnode = _parentVnode\r\n    console.log('render---', render.toString())\r\n    // debugger\r\n    currentRenderingInstance = vm\r\n    let vnode = render.call(vm._renderProxy, vm.$createElement)\r\n    vnode.parent = _parentVnode\r\n\r\n    return vnode\r\n  }\r\n}","import { initState } from './state'\r\nimport { initEvents } from './events'\r\nimport { callHook, mountComponent, initLifecycle } from \"./lifecycle\"\r\nimport { compileToFunction } from \"./compiler/index\";\r\nimport { mergeOptions } from './utils'\r\nimport { initInjections, initProvide } from './inject'\r\nimport { initRender } from './render'\r\n\r\nlet uid = 0\r\n\r\nexport function initMixin(Vue) {\r\n  // console.log('initMixin----')\r\n  Vue.prototype._init = function(options) {\r\n    const vm = this\r\n    vm._uid = uid++\r\n    vm._isVue = true\r\n    if (options && options._isComponent) {\r\n      initInternalComponent(vm, options)\r\n    } else {\r\n      vm.$options = mergeOptions(vm.constructor.options, options)\r\n    }\r\n\r\n    vm._renderProxy = vm\r\n    \r\n    vm._self = vm\r\n\r\n    // console.log('init---vm.$options---', vm.$options)\r\n    initLifecycle(vm)\r\n    initEvents(vm)\r\n    initRender(vm)\r\n    callHook(vm, 'beforeCreate')\r\n    // debugger\r\n    initInjections(vm)\r\n    initState(vm)\r\n    initProvide(vm)\r\n    callHook(vm, 'created')\r\n\r\n    if (vm.$options.el) {\r\n      // debugger\r\n      vm.$mount(vm.$options.el)\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    // console.log('$mount----el---', el)\r\n    const vm = this\r\n    const options = vm.$options\r\n    el = document.querySelector(el)\r\n    vm.$el = el\r\n    if (!options.render) {\r\n      let template = options.template\r\n      if (!template && el) {\r\n        template = el.outerHTML\r\n        // console.log('template---', template)\r\n      }\r\n      let render = compileToFunction(template)\r\n      options.render = render\r\n    }\r\n    // debugger\r\n    mountComponent(vm, el)\r\n  }\r\n}\r\n\r\nexport function initInternalComponent(vm, options) {\r\n  const opts = vm.$options = Object.create(vm.constructor.options)\r\n  // debugger\r\n  // console.log('vm---', vm, options)\r\n  const parentVnode = options._parentVnode\r\n  opts.parent = options.parent\r\n  opts._parentVnode = parentVnode\r\n  const vnodeComponentOptions = parentVnode.componentOptions\r\n  opts._renderChildren = vnodeComponentOptions.children\r\n}","import { mergeOptions, isPlainObject } from '../utils'\r\n\r\nexport function initGlobalApi(Vue) {\r\n  Vue.cid = 0\r\n  let cid = 1\r\n  \r\n  Vue.options = {}\r\n  Vue.mixin = function(options) {\r\n    this.options = mergeOptions(this.options, options)\r\n    // console.log('initGlobal-----options----', this.options)\r\n    return this\r\n  }\r\n\r\n  Vue.options._base = Vue\r\n  Vue.options.components = {}\r\n  Vue.component = function (id, definition) {\r\n    if (isPlainObject(definition)) {\r\n      definition = this.options._base.extend(definition)\r\n    }\r\n    // console.log('global-api----component---definition---', definition)\r\n    this.options.components[id] = definition\r\n  }\r\n\r\n  Vue.extend = function (opts) {\r\n    const Super = this\r\n    const Sub = function VueComponent(options) {\r\n      this._init(options)\r\n    }\r\n    Sub.prototype = Object.create(Super.prototype)\r\n    Sub.prototype.constructor = Sub\r\n    Sub.cid = cid++\r\n    Sub.options = mergeOptions(Super.options, opts)\r\n    // console.log('global-api----extend----Sub.options---', Sub.options)\r\n    return Sub\r\n  }\r\n}","import { initMixin } from './init'\r\nimport { renderMixin } from './render'\r\nimport { lifecycleMixin } from \"./lifecycle\"\r\nimport { stateMixin } from './state'\r\nimport { eventsMixin } from './events'\r\nimport { initGlobalApi } from './global-api/index'\r\n\r\n\r\n\r\nfunction Vue(options) {\r\n  // console.log('Vue---')\r\n  this._init(options)\r\n}\r\n\r\ninitMixin(Vue)\r\neventsMixin(Vue)\r\nrenderMixin(Vue)\r\nlifecycleMixin(Vue)\r\nstateMixin(Vue)\r\n\r\ninitGlobalApi(Vue)\r\n\r\nexport default Vue"],"names":["isFunction","val","isObject","_toString","Object","prototype","toString","isPlainObject","obj","call","isUndef","v","undefined","isDef","isPromise","then","catch","noop","isTrue","toArray","list","i","length","ret","Array","once","fn","called","apply","arguments","hasOwnProperty","hasOwn","key","callbacks","flushCallbacks","forEach","cb","waiting","timer","timerFn","Promise","resolve","MutationObserver","textNode","document","createTextNode","observe","characterData","textContent","setImmediate","setTimeout","nextTick","push","lifeCycleHooks","strats","mergeHook","parentVal","childVal","concat","hook","components","options","create","mergeOptions","parent","child","mergeField","isReservedTag","str","reservedTag","includes","oldArrayPrototype","arrayMethods","methods","method","args","inserted","ob","__ob__","slice","observeArray","dep","notify","id","Dep","constructor","subs","depend","target","addDep","addSub","watcher","update","stack","pushTarget","popTarget","pop","Observer","data","defineProperty","value","enumerable","isArray","__proto__","walk","item","keys","defineReactive","dependArray","current","childOb","get","set","newValue","console","log","queue","has","flushSchedulerQueue","run","pending","queueWatcher","Watcher","vm","exprOrFn","user","lazy","dirty","_watcher","getter","path","split","deps","depsId","Set","oldValue","add","evaluate","stateMixin","Vue","$watch","handler","initState","opts","$options","initData","initMethods","watch","initWatch","computed","initComputed","proxy","source","_data","bind","createWatcher","watchers","_computedWatchers","userDef","defineComputed","createComputedGetter","computedGetter","sharedProperty","initEvents","_events","eventsMixin","$on","event","l","$once","on","$off","cbs","splice","$emit","patch","oldVnode","vnode","createElm","nodeType","parentElm","parentNode","elm","insertBefore","nextSibling","removeChild","tag","el","replaceChild","text","patchProps","oldChildren","children","newChildren","patchChildren","appendChild","innerHTML","isSameVnode","newVnode","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","makeIndexByKey","reduce","memo","index","keysMap","moveIndex","moveNode","anchor","oldProps","newProps","newStyle","style","oldStyle","removeAttribute","styleName","setAttribute","createComponent","init","componentInstance","context","$el","createElement","lifecycleMixin","_update","prevVnode","_vnode","$nextTick","$forceUpdate","initLifecycle","abstract","$parent","$children","$root","$refs","_inactive","_directInactive","_isMounted","_isDestroyed","_isBeingDestroyed","mountComponent","updateComponent","_render","callHook","handlers","defaultTagRE","genProps","attrs","attr","name","styleObj","replace","JSON","stringify","gen","type","generate","test","tokens","match","lastIndex","exec","trim","join","genChildren","map","c","genData","slotTarget","genSlot","slotName","res","genIf","attrsMap","code","genElement","plain","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","advance","len","substring","parseStartTag","start","tagName","end","textEnd","indexOf","startTagMatch","endTagMatch","chars","addAttr","dynamic","dynamicAttrs","createAstElement","parse","template","root","currentParent","closeElement","element","processElement","processSlotContent","processSlotOutlet","getBindingAttr","slotTargetDynamic","slotScope","attributes","Error","compileToFunction","render","Function","initProvide","provide","_provided","initInjections","result","resolveInject","inject","Reflect","ownKeys","provideKey","provideDefault","default","VNode","componentOptions","createEmptyVNode","node","isComment","ensureCtor","comp","base","extend","createAsyncPlaceholder","factory","asyncFactory","asyncMeta","resolveAsyncComponent","baseCtor","resolved","owner","currentRenderingInstance","owners","sync","forceRender","renderCompleted","reject","reason","process","env","NODE_ENV","warn","String","loading","loadingComp","FunctionalRenderContext","Ctor","contextVm","_original","_c","a","b","d","createFunctionalComponent","renderContext","_base","exend","cid","functional","installComponentHooks","componentVNodeHooks","createComponentInstanceForVnode","$mount","hooksToMerge","_isComponent","_parentVnode","hooks","_createElement","createTextElement","installRenderHelpers","_v","_s","_t","nodes","$slots","_e","resolveSlots","slots","slot","initRender","$vnode","_renderChildren","$createElement","renderMixin","_renderProxy","uid","initMixin","_init","_uid","_isVue","initInternalComponent","_self","querySelector","outerHTML","parentVnode","vnodeComponentOptions","initGlobalApi","mixin","component","definition","Super","Sub","VueComponent"],"mappings":"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"}