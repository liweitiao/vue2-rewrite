{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observer/array.js","../src/observer/dep.js","../src/observer/index.js","../src/observer/scheduler.js","../src/observer/watcher.js","../src/state.js","../src/events.js","../src/vdom/patch.js","../src/lifecycle.js","../src/compiler/codegen/index.js","../src/compiler/parser/html-parser.js","../src/compiler/helpers.js","../src/compiler/parser/index.js","../src/compiler/index.js","../src/inject.js","../src/vdom/vnode.js","../src/vdom/create-component.js","../src/vdom/create-element.js","../src/render-helpers.js","../src/render.js","../src/init.js","../src/global-api/index.js","../src/index.js"],"sourcesContent":["export function isFunction(val) {\r\n  return typeof val === 'function';\r\n}\r\n\r\nexport function isObject(val) {\r\n  return typeof val == 'object' && val !== null\r\n}\r\n\r\nexport const noop = () => {}\r\n\r\nexport function toArray (list) {\r\n  let i = list.length\r\n  const ret = new Array(i)\r\n  while (i--) {\r\n    ret[i] = list[i]\r\n  }\r\n  return ret\r\n}\r\n\r\n\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty\r\nexport function hasOwn(obj, key) {\r\n  return hasOwnProperty.call(obj, key)\r\n}\r\n\r\n\r\n\r\nconst callbacks = []\r\n\r\nfunction flushCallbacks() {\r\n  // console.log('utils---flushCallbacks---cbs--', callbacks)\r\n  callbacks.forEach(cb => {\r\n    // console.log('utils---flushCallbacks---cb---', cb)\r\n    cb()\r\n  })\r\n  waiting = false\r\n}\r\n\r\nlet waiting = false\r\n\r\nfunction timer(flushCallbacks) {\r\n  let timerFn = () => {}\r\n  if (Promise) {\r\n    timerFn = () => {\r\n      Promise.resolve().then(flushCallbacks)\r\n    }\r\n  } else if (MutationObserver) {\r\n    let textNode = document.createTextNode(1)\r\n    let observe = new MutationObserver(flushCallbacks)\r\n    observe.observe(textNode, {\r\n      characterData: true\r\n    })\r\n    timerFn = () => {\r\n      textNode.textContent = 3\r\n    }\r\n  } else if (setImmediate) {\r\n    timerFn = () => {\r\n      setImmediate(flushCallbacks)\r\n    }\r\n  } else {\r\n    timerFn = () => {\r\n      setTimeout(flushCallbacks)\r\n    }\r\n  }\r\n  timerFn()\r\n}\r\n\r\nexport function nextTick(cb) {\r\n  callbacks.push(cb)\r\n\r\n  if (!waiting) {\r\n    timer(flushCallbacks)\r\n    waiting = true\r\n  }\r\n}\r\n\r\nlet lifeCycleHooks = [\r\n  'beforeCreate',\r\n  'created',\r\n  'beforeMount',\r\n  'mounted',\r\n  'beforeUpdate',\r\n  'updated',\r\n  'beforeDestroy',\r\n  'destroyed',\r\n]\r\nlet strats = {}\r\n\r\nfunction mergeHook(parentVal, childVal) {\r\n  if (childVal) {\r\n    if (parentVal) {\r\n      return parentVal.concat(childVal)\r\n    } else {\r\n      return [childVal]\r\n    }\r\n  } else {\r\n    return parentVal\r\n  }\r\n}\r\n\r\nlifeCycleHooks.forEach(hook => {\r\n  strats[hook] = mergeHook\r\n})\r\n\r\nstrats.components = function(parentVal, childVal) {\r\n  // console.log('parentVal--childVal---', parentVal, childVal)\r\n  let options = Object.create(parentVal)\r\n  // console.log('utils--components---options--', options)\r\n  if (childVal) {\r\n    for (let key in childVal) {\r\n      options[key] = childVal[key]\r\n    }\r\n  }\r\n  return options\r\n}\r\n\r\nexport function mergeOptions(parent, child) {\r\n  const options = {}\r\n  for (let key in parent) {\r\n    mergeField(key)\r\n  }\r\n  for (let key in child) {\r\n    if (parent.hasOwnProperty(key)) {\r\n      continue\r\n    }\r\n    mergeField(key)\r\n  }\r\n\r\n  function mergeField(key) {\r\n    let parentVal = parent[key]\r\n    let childVal = child[key]\r\n    if (strats[key]) {\r\n      options[key] = strats[key](parentVal, childVal)\r\n    } else {\r\n      if (isObject(parentVal) && isObject(childVal)) {\r\n        options[key] = { ...parentVal, ...childVal }\r\n      } else {\r\n        options[key] = child[key] || parent[key]\r\n      }\r\n    }\r\n  }\r\n  return options\r\n}\r\n\r\nexport function isReservedTag(str) {\r\n  let reservedTag = 'a,div,span,p,img,button,ul,li';\r\n  // 源码根据 “，” 生成映射表 {a:true,div:true,p:true}\r\n  return reservedTag.includes(str);\r\n}\r\n","let oldArrayPrototype = Array.prototype\r\n// console.log(oldArrayPrototype.length)\r\nexport let arrayMethods = Object.create(oldArrayPrototype)\r\n// let arrayMethods = Object.create(oldArrayPrototype)\r\n\r\nlet methods = [\r\n  'push',\r\n  'shift',\r\n  'unshift',\r\n  'pop',\r\n  'reverse',\r\n  'sort',\r\n  'splice'\r\n]\r\n\r\nmethods.forEach(method => {\r\n  arrayMethods[method] = function (...args) {\r\n    oldArrayPrototype[method].call(this, ...args)\r\n    let inserted\r\n    let ob = this.__ob__\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        // console.log('unshift')\r\n        inserted = args\r\n        break\r\n      case 'splice':\r\n        // console.log('splice')\r\n        inserted = args.slice(2)\r\n      default: \r\n        break\r\n    }\r\n    if (inserted) ob.observeArray(inserted)\r\n\r\n    ob.dep.notify()\r\n  }\r\n})","let id = 0\r\nclass Dep {\r\n  constructor() {\r\n    this.id = id++\r\n    this.subs = []\r\n  }\r\n  depend() {\r\n    if (Dep.target) {\r\n      // console.log('dep----depend---this---', this)\r\n      Dep.target.addDep(this)\r\n    }\r\n  }\r\n  addSub(watcher) {\r\n    this.subs.push(watcher)\r\n  }\r\n  notify() {\r\n    // console.log('dep----notify----')\r\n    this.subs.forEach(watcher => watcher.update())\r\n  }\r\n}\r\nDep.target = null\r\n\r\nlet stack = []\r\n\r\nexport function pushTarget(watcher) {\r\n  Dep.target = watcher\r\n  stack.push(watcher)\r\n  // console.log(stack)\r\n}\r\n\r\nexport function popTarget(watcher) {\r\n  // Dep.target = null\r\n  stack.pop()\r\n  Dep.target = stack[stack.length - 1]\r\n  // console.log('dep--popTarget--Dep.target---', Dep.target)\r\n}\r\n\r\nexport default Dep","import { isObject } from '../utils'\r\nimport { arrayMethods } from './array'\r\nimport Dep from './dep'\r\n\r\nclass Observer {\r\n  constructor(data) {\r\n    this.dep = new Dep()\r\n    Object.defineProperty(data, '__ob__', {\r\n      value: this,\r\n      enumerable: false\r\n    })\r\n\r\n    if (Array.isArray(data)) {\r\n      data.__proto__ = arrayMethods\r\n      this.observeArray(data)\r\n    } else {\r\n      this.walk(data)\r\n    }\r\n  }\r\n\r\n  observeArray(data) {\r\n    data.forEach(item => observe(item))\r\n  }\r\n\r\n  walk(data) {\r\n    Object.keys(data).forEach(key => {\r\n      defineReactive(data, key, data[key])\r\n    })\r\n  }\r\n}\r\n\r\nfunction dependArray(value) {\r\n  for (let i = 0; i < value.length; i++) {\r\n    let current = value[i]\r\n    current.__ob__ && current.__ob__.dep.depend()\r\n    if (Array.isArray(current)) {\r\n      dependArray(current)\r\n    }\r\n  }\r\n}\r\n\r\nexport function defineReactive(data, key, value) {\r\n  let childOb = observe(value)\r\n  // console.log('observer---key---value--childOb---', key, value, childOb)\r\n  let dep = new Dep()\r\n  // console.log('observer---key---dep---', key, dep)\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      // console.log('get--')\r\n      if (Dep.target) {\r\n        // console.log('observer---key---dep2---', key, dep)\r\n        dep.depend()\r\n        if (childOb) {\r\n          childOb.dep.depend()\r\n          if (Array.isArray(value)) {\r\n            dependArray(value)\r\n          }\r\n        }\r\n      }\r\n      return value\r\n    },\r\n    set(newValue) {\r\n      console.log('dep---newValue---', dep, newValue)\r\n      if (newValue !== value) {\r\n        observe(newValue)\r\n        value = newValue\r\n        // debugger\r\n        dep.notify()\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nexport function observe(data) {\r\n  if (!isObject(data)) {\r\n    return\r\n  }\r\n  if(data.__ob__) {\r\n    return data.__ob__\r\n  }\r\n\r\n  return new Observer(data)\r\n}","import { nextTick } from \"../utils\";\r\n\r\nlet queue = []\r\nlet has = {}\r\n\r\nfunction flushSchedulerQueue() {\r\n  for (let i = 0; i < queue.length; i++) {\r\n    queue[i].run()\r\n  }\r\n  queue = []\r\n  has = {}\r\n  pending = false\r\n}\r\n\r\n\r\nlet pending = false\r\n\r\nexport function queueWatcher(watcher) {\r\n  const id = watcher.id\r\n  if (has[id] == null) {\r\n    queue.push(watcher)\r\n    has[id] = true\r\n    if (!pending) {\r\n      nextTick(flushSchedulerQueue, 0)\r\n      pending = true\r\n    }\r\n  }\r\n}","import { popTarget, pushTarget } from \"./dep\";\r\nimport { queueWatcher } from './scheduler'\r\n\r\nlet id = 0\r\nclass Watcher {\r\n  constructor(vm, exprOrFn, cb, options) {\r\n    this.vm = vm\r\n    this.exprOrFn = exprOrFn\r\n    this.user = !!options.user\r\n    this.lazy = !!options.lazy\r\n    this.dirty = options.lazy\r\n    // console.log('dirty---', this.dirty)\r\n    this.cb = cb\r\n    this.options = options\r\n    this.id = id++\r\n    // this.getter = exprOrFn\r\n\r\n    if (typeof exprOrFn == 'string') {\r\n      this.getter = function() {\r\n        let path = exprOrFn.split('.')\r\n        let obj = vm\r\n        for (let i = 0; i < path.length; i++) {\r\n          obj = obj[path[i]]\r\n        }\r\n        // console.log('watcher---obj---', obj)\r\n        // console.log('exprOrFn---', exprOrFn)\r\n        return obj\r\n      }\r\n    } else {\r\n      // console.log('exprOrFn---', exprOrFn)\r\n      this.getter = exprOrFn\r\n    }\r\n\r\n    // console.log('watcher--getter---', this.getter)\r\n    this.deps = []\r\n    this.depsId = new Set()\r\n    // this.get()\r\n    this.value = this.lazy ? undefined : this.get()\r\n    // this.value = this.get()\r\n  }\r\n  get() {\r\n    pushTarget(this)\r\n    const value = this.getter.call(this.vm)\r\n    popTarget()\r\n\r\n    // console.log('watcher--get---value---', value)\r\n    return value\r\n  }\r\n  update() {\r\n    if (this.lazy) {\r\n      this.dirty = true\r\n      // console.log('update----')\r\n    } else {\r\n      // console.log('update22----')\r\n      queueWatcher(this)\r\n    }\r\n  }\r\n  run() {\r\n    let newValue = this.get()\r\n    let oldValue = this.value\r\n    this.value = newValue\r\n    if (this.user) {\r\n      this.cb.call(this.vm, newValue, oldValue)\r\n    }\r\n    // console.log('watcher---run---')\r\n  }\r\n  addDep(dep) {\r\n    let id = dep.id\r\n    if (!this.depsId.has(id)) {\r\n      this.depsId.add(id)\r\n      this.deps.push(dep)\r\n      dep.addSub(this)\r\n    }\r\n  }\r\n  evaluate() {\r\n    this.dirty = false\r\n    // console.log('watcher----dirty---', this.dirty)\r\n    this.value = this.get()\r\n  }\r\n  depend() {\r\n    let i = this.deps.length\r\n    while (i--) {\r\n      this.deps[i].depend()\r\n    }\r\n  }\r\n}\r\n\r\nexport default Watcher","import { isFunction, noop } from './utils'\r\nimport { observe } from './observer/index'\r\nimport Watcher from \"./observer/watcher\";\r\nimport Dep from './observer/dep'\r\n\r\nexport function stateMixin(Vue) {\r\n  Vue.prototype.$watch = function (key, handler, options = {}) {\r\n    options.user = true\r\n    // console.log('state---$watch---this---', this)\r\n    new Watcher(this, key, handler, options)\r\n  }\r\n}\r\n\r\n\r\nexport function initState(vm) {\r\n  const opts = vm.$options\r\n  // console.log('state----opts---', opts)\r\n  if (opts.data) {\r\n    initData(vm)\r\n  }\r\n  if (opts.methods) {\r\n    initMethods(vm, opts.methods)\r\n  }\r\n  if (opts.watch) {\r\n    initWatch(vm, opts.watch)\r\n  }\r\n  if (opts.computed) {\r\n    initComputed(vm, opts.computed)\r\n  }\r\n}\r\n\r\nfunction proxy(vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[source][key]\r\n    },\r\n    set(newValue) {\r\n      vm[source][key] = newValue\r\n    }\r\n  })\r\n}\r\n\r\n\r\nfunction initData(vm) {\r\n  let data = vm.$options.data\r\n  data = vm._data = isFunction(data) ? data.call(vm) : data\r\n\r\n  for (let key in data) {\r\n    proxy(vm, '_data', key)\r\n  }\r\n\r\n  observe(data)\r\n}\r\n\r\nfunction initMethods(vm, methods) {\r\n  // console.log('initMethods---vm---methods---', vm, methods)\r\n  for (const key in methods) {\r\n    vm[key] = typeof methods[key] !== 'function' ? noop : methods[key].bind(vm)\r\n  }\r\n}\r\n\r\nfunction initWatch(vm, watch) {\r\n  for (let key in watch) {\r\n    let handler = watch[key]\r\n    // console.log('state---handler----', handler)\r\n    if (Array.isArray(handler)) {\r\n      for (let i = 0; i < handler.length; i++) {\r\n        createWatcher(vm, key, handler[i])\r\n      }\r\n    } else {\r\n      createWatcher(vm, key, handler)\r\n    }\r\n  }\r\n}\r\n\r\nfunction createWatcher(vm, key, handler) {\r\n  return vm.$watch(key, handler)\r\n}\r\n\r\nfunction initComputed(vm, computed) {\r\n  const watchers = vm._computedWatchers = {}\r\n  for (let key in computed) {\r\n    const userDef = computed[key]\r\n    let getter = typeof userDef == 'function' ? userDef : userDef.get\r\n\r\n    watchers[key] = new Watcher(vm, getter, () => {}, { lazy: true })\r\n\r\n    defineComputed(vm, key, userDef)\r\n  }\r\n}\r\n\r\nfunction createComputedGetter(key) {\r\n  // console.log('createComputed---')\r\n  return function computedGetter() {\r\n    let watcher = this._computedWatchers[key]\r\n    // console.log('state----createComputedGetter-key--watcher---',key, watcher)\r\n    if (watcher.dirty) {\r\n      watcher.evaluate()\r\n    }\r\n\r\n    // console.log('state----createComputed----Dep.target---', Dep.target)\r\n    if (Dep.target) {\r\n      watcher.depend()\r\n    }\r\n    return watcher.value\r\n  }\r\n  \r\n}\r\n\r\nfunction defineComputed(vm, key, userDef) {\r\n  let sharedProperty = {}\r\n  if (typeof userDef == 'function') {\r\n    sharedProperty.get = userDef\r\n  } else {\r\n    // sharedProperty.get = userDef.get\r\n    sharedProperty.get = createComputedGetter(key)\r\n    // sharedProperty.get()\r\n    sharedProperty.set = userDef.set\r\n  }\r\n  Object.defineProperty(vm, key, sharedProperty)\r\n}","/* @flow */\r\n\r\n// import {\r\n//   tip,\r\n//   toArray,\r\n//   hyphenate,\r\n//   formatComponentName,\r\n//   invokeWithErrorHandling\r\n// } from '../util/index'\r\n// import { updateListeners } from '../vdom/helpers/index'\r\nimport { toArray } from './utils'\r\n\r\n\r\nexport function initEvents (vm) {\r\n  vm._events = Object.create(null)\r\n}\r\n\r\nlet target\r\n\r\nfunction add (event, fn) {\r\n  target.$on(event, fn)\r\n}\r\n\r\nfunction remove (event, fn) {\r\n  target.$off(event, fn)\r\n}\r\n\r\nexport function eventsMixin (Vue) {\r\n  const hookRE = /^hook:/\r\n  Vue.prototype.$on = function (event, fn) {\r\n    console.log('$on----')\r\n    const vm = this\r\n    if (Array.isArray(event)) {\r\n      for (let i = 0, l = event.length; i < l; i++) {\r\n        vm.$on(event[i], fn)\r\n      }\r\n    } else {\r\n      (vm._events[event] || (vm._events[event] = [])).push(fn)\r\n    }\r\n    return vm\r\n  }\r\n\r\n  Vue.prototype.$once = function (event, fn) {\r\n    const vm = this\r\n    function on () {\r\n      vm.$off(event, on)\r\n      fn.apply(vm, arguments)\r\n    }\r\n    on.fn = fn\r\n    vm.$on(event, on)\r\n    return vm\r\n  }\r\n\r\n  Vue.prototype.$off = function (event, fn) {\r\n    const vm = this\r\n    if (!arguments.length) {\r\n      vm._events = Object.create(null)\r\n      return vm\r\n    }\r\n    // array of events\r\n    if (Array.isArray(event)) {\r\n      for (let i = 0, l = event.length; i < l; i++) {\r\n        vm.$off(event[i], fn)\r\n      }\r\n      return vm\r\n    }\r\n    // specific event\r\n    const cbs = vm._events[event]\r\n    if (!cbs) {\r\n      return vm\r\n    }\r\n    if (!fn) {\r\n      vm._events[event] = null\r\n      return vm\r\n    }\r\n    // specific handler\r\n    let cb\r\n    let i = cbs.length\r\n    while (i--) {\r\n      cb = cbs[i]\r\n      if (cb === fn || cb.fn === fn) {\r\n        cbs.splice(i, 1)\r\n        break\r\n      }\r\n    }\r\n    return vm\r\n  }\r\n\r\n  Vue.prototype.$emit = function (event) {\r\n    console.log('$emit----')\r\n    const vm = this\r\n    let cbs = vm._events[event]\r\n    if (cbs) {\r\n      cbs = cbs.length > 1 ? toArray(cbs) : cbs\r\n      const args = toArray(arguments, 1)\r\n      const info = `event handler for \"${event}\"`\r\n      for (let i = 0, l = cbs.length; i < l; i++) {\r\n        // invokeWithErrorHandling(cbs[i], vm, args, vm, info)\r\n        cbs[i].call(vm)\r\n      }\r\n    }\r\n    return vm\r\n  }\r\n}\r\n","export function patch(oldVnode, vnode) {\r\n    // console.log('patch----')\r\n    // debugger\r\n  if (!oldVnode) {\r\n      return createElm(vnode); // 如果没有el元素，那就直接根据虚拟节点返回真实节点\r\n  }\r\n\r\n  if (oldVnode.nodeType == 1) {\r\n      // 用vnode  来生成真实dom 替换原本的dom元素\r\n      const parentElm = oldVnode.parentNode; // 找到他的父亲\r\n      let elm = createElm(vnode); //根据虚拟节点 创建元素\r\n\r\n      // 在第一次渲染后 是删除掉节点，下次在使用无法获取\r\n      parentElm.insertBefore(elm, oldVnode.nextSibling);\r\n\r\n      parentElm.removeChild(oldVnode)\r\n\r\n      return elm\r\n  } else {\r\n      // 如果标签名称不一样 直接删掉老的换成新的即可\r\n      if (oldVnode.tag !== vnode.tag) {\r\n          // 可以通过vnode.el属性。获取现在真实的dom元素\r\n          return oldVnode.el.parentNode.replaceChild(createElm(vnode), oldVnode.el);\r\n      }\r\n\r\n      // 如果标签一样比较属性 , 传入新的新的虚拟节点 ，和老的属性 。用新的属性 更新老的\r\n      let el = vnode.el = oldVnode.el; // 表示当前新节点 复用老节点\r\n\r\n      // 如果两个虚拟节点是文本节点  比较文本内容 ...\r\n\r\n      if (vnode.tag == undefined) { // 新老都是文本\r\n          if (oldVnode.text !== vnode.text) {\r\n              el.textContent = vnode.text;\r\n          }\r\n          return;\r\n      }\r\n\r\n      patchProps(vnode, oldVnode.data)\r\n      // 属性可能有删除的情况\r\n\r\n      // 一方有儿子 ， 一方没儿子\r\n      let oldChildren = oldVnode.children || [];\r\n      let newChildren = vnode.children || [];\r\n\r\n      if (oldChildren.length > 0 && newChildren.length > 0) {\r\n          // 双方都有儿子\r\n\r\n          //  vue用了双指针的方式 来比对 \r\n          patchChildren(el, oldChildren, newChildren);\r\n      } else if (newChildren.length > 0) { // 老的没儿子 但是新的有儿子\r\n          for (let i = 0; i < newChildren.length; i++) {\r\n              let child = createElm(newChildren[i]);\r\n              el.appendChild(child); // 循环创建新节点\r\n          }\r\n\r\n      } else if (oldChildren.length > 0) { // 老的有儿子 新的没儿子\r\n          el.innerHTML = ``; // 直接删除老节点\r\n      }\r\n      // vue的特点是每个组件都有一个watcher，当前组件中数据变化 只需要更新当前组件\r\n      return el;\r\n  }\r\n}\r\n\r\nfunction isSameVnode(oldVnode, newVnode) {\r\n  return (oldVnode.tag == newVnode.tag) && (oldVnode.key == newVnode.key);\r\n}\r\n\r\n\r\n\r\n// dom的生成 ast => render方法 => 虚拟节点 => 真实dom\r\n// 更新时需要重新创建ast语法树吗？\r\n// 如果动态的添加了节点 （绕过vue添加的vue监控不到的） 难道不需要重新ast吗？\r\n// 后续数据变了，只会操作自己管理的dom元素\r\n// 如果直接操作dom 和 vue无关，不需要重新创建ast语法树\r\n\r\nfunction patchChildren(el, oldChildren, newChildren) {\r\n  let oldStartIndex = 0;\r\n  let oldStartVnode = oldChildren[0];\r\n  let oldEndIndex = oldChildren.length - 1;\r\n  let oldEndVnode = oldChildren[oldEndIndex];\r\n  let newStartIndex = 0;\r\n  let newStartVnode = newChildren[0];\r\n  let newEndIndex = newChildren.length - 1;\r\n  let newEndVnode = newChildren[newEndIndex];\r\n\r\n  const makeIndexByKey = (children)=>{\r\n      return children.reduce((memo,current,index)=>{\r\n          if(current.key){\r\n              memo[current.key] = index;\r\n          }\r\n          return memo;\r\n      },{})\r\n  }\r\n  const keysMap = makeIndexByKey(oldChildren);\r\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n      // 头头比较 尾尾比较 头尾比较 尾头比较\r\n      // 优化了 向后添加， 向前添加，尾巴移动到头部，头部移动到尾部 ，反转\r\n      if(!oldStartVnode){ // 已经被移动走了\r\n          oldStartVnode = oldChildren[++oldStartIndex];\r\n      }else if(!oldEndVnode){\r\n          oldEndVnode = oldChildren[--oldEndIndex];\r\n      }\r\n      // 同时循环新的节点和 老的节点，有一方循环完毕就结束了\r\n      if (isSameVnode(oldStartVnode, newStartVnode)) { // 头头比较，发现标签一致，\r\n          patch(oldStartVnode, newStartVnode);\r\n          oldStartVnode = oldChildren[++oldStartIndex];\r\n          newStartVnode = newChildren[++newStartIndex];\r\n      }else if(isSameVnode(oldEndVnode,newEndVnode)){ // 从尾部开始比较\r\n          patch(oldEndVnode,newEndVnode);\r\n          oldEndVnode = oldChildren[--oldEndIndex];\r\n          newEndVnode = newChildren[--newEndIndex];\r\n      } \r\n      // 头尾比较  =》 reverse\r\n      else if(isSameVnode(oldStartVnode,newEndVnode)){\r\n          patch(oldStartVnode,newEndVnode);\r\n          el.insertBefore(oldStartVnode.el,oldEndVnode.el.nextSibling); // 移动老的元素，老的元素就被移动走了，不用删除\r\n          oldStartVnode = oldChildren[++oldStartIndex];\r\n          newEndVnode = newChildren[--newEndIndex];\r\n      }\r\n      else if(isSameVnode(oldEndVnode,newStartVnode)){ // 尾头比较\r\n          patch(oldEndVnode,newStartVnode);\r\n          el.insertBefore(oldEndVnode.el,oldStartVnode.el);\r\n          oldEndVnode = oldChildren[--oldEndIndex];\r\n          newStartVnode = newChildren[++newStartIndex];\r\n      }else{\r\n          // 乱序比对   核心diff\r\n          // 1.需要根据key和 对应的索引将老的内容生成程映射表\r\n          let moveIndex = keysMap[newStartVnode.key]; // 用新的去老的中查找\r\n          if(moveIndex == undefined){ // 如果不能复用直接创建新的插入到老的节点开头处\r\n              el.insertBefore(createElm(newStartVnode),oldStartVnode.el);\r\n          }else{\r\n              let moveNode = oldChildren[moveIndex];\r\n              oldChildren[moveIndex] = null; // 此节点已经被移动走了\r\n              el.insertBefore(moveNode.el,oldStartVnode.el);\r\n              patch(moveNode,newStartVnode); // 比较两个节点的属性\r\n          }\r\n          newStartVnode = newChildren[++newStartIndex]\r\n      }\r\n  }\r\n  // 如果用户追加了一个怎么办？  \r\n\r\n  // 这里是没有比对完的\r\n  if (newStartIndex <= newEndIndex) {\r\n      for (let i = newStartIndex; i <= newEndIndex; i++) {\r\n          // el.appendChild(createElm(newChildren[i]))  \r\n          // insertBefore方法 他可以appendChild功能 insertBefore(节点,null)  dom api\r\n\r\n          //  看一下为指针的下一个元素是否存在\r\n          let anchor = newChildren[newEndIndex + 1] == null? null :newChildren[newEndIndex + 1].el\r\n          el.insertBefore(createElm(newChildren[i]),anchor);\r\n      }\r\n  }\r\n  if(oldStartIndex <= oldEndIndex){\r\n      for (let i = oldStartIndex; i <= oldEndIndex; i++) {\r\n          //  如果老的多 将老节点删除 ， 但是可能里面有null 的情况\r\n          if(oldChildren[i] !== null) el.removeChild(oldChildren[i].el);\r\n      }\r\n  }\r\n\r\n}\r\n// 创建真实节点的\r\nfunction patchProps(vnode, oldProps = {}) { // 初次渲染时可以调用此方法，后续更新也可以调用此方法\r\n  let newProps = vnode.data || {};\r\n  let el = vnode.el;\r\n  // 如果老的属性有，新的没有直接删除\r\n  let newStyle = newProps.style || {};\r\n  let oldStyle = oldProps.style || {};\r\n  for (let key in oldStyle) {\r\n      if (!newStyle[key]) { // 新的里面不存在这个样式\r\n          el.style[key] = '';\r\n      }\r\n  }\r\n  for (let key in oldProps) {\r\n      if (!newProps[key]) {\r\n          el.removeAttribute(key);\r\n      }\r\n  }\r\n  // 直接用新的生成到元素上\r\n  for (let key in newProps) {\r\n      if (key === 'style') {\r\n          for (let styleName in newProps.style) {\r\n              el.style[styleName] = newProps.style[styleName];\r\n          }\r\n      } else {\r\n          el.setAttribute(key, newProps[key]);\r\n      }\r\n  }\r\n}\r\n\r\nfunction createComponent(vnode) {\r\n  let i = vnode.data; //  vnode.data.hook.init\r\n  if (i && (i = i.hook) && (i = i.init)) {\r\n      i(vnode); // 调用init方法\r\n  }\r\n  if (vnode.componentInstance) { // 有属性说明子组件new完毕了，并且组件对应的真实DOM挂载到了componentInstance.$el\r\n      return true;\r\n  }\r\n\r\n}\r\nexport function createElm(vnode) {\r\n  let { tag, data, children, text, context } = Array.isArray(vnode) ? vnode[0] : vnode\r\n  if (typeof tag === 'string') { // 元素\r\n      if (createComponent(vnode)) {\r\n          // 返回组件对应的真实节点\r\n          return vnode.componentInstance.$el;\r\n      }\r\n      vnode.el = document.createElement(tag); // 虚拟节点会有一个el属性 对应真实节点\r\n      patchProps(vnode);\r\n      children.forEach(child => {\r\n          vnode.el.appendChild(createElm(child))\r\n      });\r\n  } else {\r\n      vnode.el = document.createTextNode(text);\r\n  }\r\n  return vnode.el\r\n}\r\n","import { patch } from \"./vdom/patch\";\r\nimport Watcher from './observer/watcher'\r\nimport { nextTick } from \"./utils\";\r\n\r\nexport function lifecycleMixin(Vue) {\r\n  Vue.prototype._update = function(vnode) {\r\n    const vm = this\r\n    // debugger\r\n    vm.$el = patch(vm.$el, vnode)\r\n  }\r\n  Vue.prototype.$nextTick = nextTick\r\n}\r\n\r\nexport function initLifecycle(vm) {\r\n  const options = vm.$options\r\n\r\n  // locate first non-abstract parent\r\n  let parent = options.parent\r\n  if (parent && !options.abstract) {\r\n      while (parent.$options.abstract && parent.$parent) {\r\n          parent = parent.$parent\r\n      }\r\n      parent.$children.push(vm)\r\n  }\r\n\r\n  vm.$parent = parent\r\n  vm.$root = parent ? parent.$root : vm\r\n\r\n  vm.$children = []\r\n  vm.$refs = {}\r\n\r\n  vm._watcher = null\r\n  vm._inactive = null\r\n  vm._directInactive = false\r\n  vm._isMounted = false\r\n  vm._isDestroyed = false\r\n  vm._isBeingDestroyed = false\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n  let updateComponent = () => {\r\n    let vnode = vm._render()\r\n    console.log('lifecycle----mountComponent----vnode----', vnode)\r\n    // debugger\r\n    vm._update(vnode)\r\n  }\r\n\r\n  callHook(vm, 'beforeMount')\r\n  new Watcher(vm, updateComponent, () => {\r\n    console.log('视图更新了！')\r\n  }, true)\r\n  // updateComponent()\r\n  callHook(vm, 'mounted')\r\n}\r\n\r\nexport function callHook(vm,hook){\r\n  let handlers = vm.$options[hook];\r\n  if(handlers){\r\n      for(let i =0; i < handlers.length;i++){\r\n          handlers[i].call(vm)\r\n      }\r\n  }\r\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{aaaaa}}\r\n\r\n\r\n// html字符串 =》 字符串  _c('div',{id:'app',a:1},'hello')\r\n\r\nfunction genProps(attrs) { // [{name:'xxx',value:'xxx'},{name:'xxx',value:'xxx'}]\r\n    let str = '';\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        let attr = attrs[i];\r\n        if (attr.name === 'style') { // color:red;background:blue\r\n            let styleObj = {};\r\n            attr.value.replace(/([^;:]+)\\:([^;:]+)/g, function() {\r\n                styleObj[arguments[1]] = arguments[2]\r\n            })\r\n            attr.value = styleObj\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},`;\r\n    }\r\n    return `{${str.slice(0,-1)}}`\r\n}\r\n\r\nfunction gen(el) {\r\n    if (el.type == 1) { // element = 1 text = 3\r\n        return generate(el);\r\n    } else {\r\n        let text = el.text;\r\n        if (!defaultTagRE.test(text)) {\r\n            return `_v('${text}')`;\r\n        } else {\r\n            // 'hello' + arr + 'world'    hello {{arr}} {{aa}} world\r\n            let tokens = [];\r\n            let match;\r\n            let lastIndex = defaultTagRE.lastIndex = 0; // CSS-LOADER 原理一样\r\n            while (match = defaultTagRE.exec(text)) { // 看有没有匹配到\r\n                let index = match.index; // 开始索引\r\n                if (index > lastIndex) {\r\n                    tokens.push(JSON.stringify(text.slice(lastIndex, index)))\r\n                }\r\n                tokens.push(`_s(${match[1].trim()})`); // JSON.stringify()\r\n                lastIndex = index + match[0].length;\r\n            }\r\n            if (lastIndex < text.length) {\r\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n            }\r\n            return `_v(${tokens.join('+')})`\r\n        }\r\n    }\r\n}\r\n\r\nfunction genChildren(el) {\r\n    let children = el.children; // 获取儿子\r\n    if (children) {\r\n        return children.map(c => gen(c)).join(',')\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction genData(el) {\r\n    let data = '{'\r\n    if (el.slotTarget) {\r\n        data += `slot:${el.slotTarget}`\r\n    }\r\n    data += '}'\r\n\r\n    return data\r\n}\r\n\r\nfunction genSlot(el) {\r\n    var slotName = el.slotName || '\"default\"'\r\n    var children = genChildren(el)\r\n    var res = \"_t(\" + slotName + (children ? (\",function(){return \" + children + \"}\") : '')\r\n    // TODO...\r\n    // var attrs = el.attrs || el.dynamicAttrs\r\n\r\n    res += ')'\r\n    // debugger\r\n    return res\r\n}\r\n\r\nexport function generate(el) { //  _c('div',{id:'app',a:1},_c('span',{},'world'),_v())\r\n    // 遍历树 将树拼接成字符串\r\n    const code = el ? genElement(el) : '_c(\"div\")'\r\n    return code;\r\n}\r\n\r\nexport function genElement(el) { //  _c('div',{id:'app',a:1},_c('span',{},'world'),_v())\r\n    // 遍历树 将树拼接成字符串\r\n    let data\r\n    if (!el.plain) {\r\n        data = genData(el)\r\n    }\r\n    if (el.tag === 'slot') {\r\n        return genSlot(el)\r\n    } else {\r\n        let children = genChildren(el);\r\n        // debugger\r\n        let code = `_c('${el.tag}',${\r\n            el.attrs.length? genProps(el.attrs): 'undefined'\r\n        }${\r\n            children? `,${children}`:''\r\n        })`;\r\n\r\n        return code;\r\n    }\r\n\r\n    \r\n    \r\n}","\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名 \r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  用来获取的标签名的 match后的索引为1的\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 匹配开始标签的 \r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配闭合标签的\r\n//           aa  =   \"  xxx \"  | '  xxxx '  | xxx\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // a=b  a=\"b\"  a='b'\r\nconst startTagClose = /^\\s*(\\/?)>/; //     />   <div/>\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{aaaaa}}\r\n\r\nexport function parseHTML(html, options) {\r\n\r\n  function advance(len) {\r\n    html = html.substring(len);\r\n  }\r\n\r\n  function parseStartTag() {\r\n      const start = html.match(startTagOpen);\r\n      if (start) {\r\n          const match = {\r\n              tagName: start[1],\r\n              attrs: []\r\n          }\r\n          advance(start[0].length);\r\n          let end;\r\n          // 如果没有遇到标签结尾就不停的解析\r\n          let attr;\r\n\r\n          while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n              match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] })\r\n              advance(attr[0].length)\r\n          }\r\n          if (end) {\r\n              advance(end[0].length);\r\n          }\r\n          return match;\r\n      }\r\n      return false; // 不是开始标签\r\n  }\r\n\r\n  while (html) {\r\n    let textEnd = html.indexOf('<')\r\n    if (textEnd == 0) {\r\n      const startTagMatch = parseStartTag(html)\r\n      // debugger\r\n      if (startTagMatch) {\r\n          options.start(startTagMatch.tagName, startTagMatch.attrs)\r\n          continue;\r\n      }\r\n      const endTagMatch = html.match(endTag);\r\n      if (endTagMatch) {\r\n        options.end(endTagMatch[1]);\r\n          advance(endTagMatch[0].length);\r\n          continue;\r\n      }\r\n    }\r\n    let text; // //  </div>\r\n    if (textEnd > 0) {\r\n        text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n        options.chars(text);\r\n        advance(text.length);\r\n    }\r\n  }\r\n}","export function addAttr (el, name, value, dynamic) {\r\n  const attrs = dynamic\r\n    ? (el.dynamicAttrs || (el.dynamicAttrs = []))\r\n    : (el.attrs || (el.attrs = []))\r\n  attrs.push({ name, value, dynamic })\r\n  el.plain = false\r\n}\r\n\r\nexport function getRawBindingAttr (el, name) {\r\n  return el.rawAttrsMap[':' + name] ||\r\n    el.rawAttrsMap['v-bind:' + name] ||\r\n    el.rawAttrsMap[name]\r\n}","\r\n// // 看一下用户是否传入了 , 没传入可能传入的是 template, template如果也没有传递\r\n// // 将我们的html =》 词法解析  （开始标签 ， 结束标签，属性，文本）\r\n// // => ast语法树 用来描述html语法的 stack=[]\r\n\r\n// // codegen  <div>hello</div>  =>   _c('div',{},'hello')  => 让字符串执行\r\n// // 字符串如果转成代码 eval 好性能 会有作用域问题\r\n\r\n// // 模板引擎 new Function + with 来实现\r\n\r\nimport { parseHTML } from './html-parser'\r\nimport { addAttr } from '../helpers'\r\n\r\nexport function createAstElement(tagName, attrs) {\r\n    return {\r\n        tag: tagName,\r\n        type: 1,\r\n        children: [],\r\n        parent: null,\r\n        attrs\r\n    }\r\n}\r\n\r\nexport function parse(template, options) {\r\n    let root\r\n    let currentParent\r\n    const stack = []\r\n\r\n    function closeElement(element) {\r\n        // processElement(element)\r\n        // debugger\r\n        element = processElement(element)\r\n        // processSlotContent(el)\r\n        // currentParent || currentParent.children.push(element)\r\n        element.parent = currentParent\r\n        // debugger\r\n        // return element\r\n    }\r\n\r\n\r\n\r\n    function processElement(element) {\r\n        processSlotContent(element)\r\n        processSlotOutlet(element)\r\n        // debugger\r\n        return element\r\n    }\r\n\r\n    function processSlotOutlet(el) {\r\n        if (el.tag === 'slot') {\r\n            // debugger\r\n            el.slotName = `\"${getBindingAttr(el, 'name')}\"`\r\n        }\r\n    }\r\n\r\n    function getBindingAttr(el, name) {\r\n        let slotTarget = el.attrs[0] && el.attrs[0]['value']\r\n        return slotTarget\r\n    }\r\n\r\n\r\n    function processSlotContent(el) {\r\n        // debugger\r\n        var slotTarget = getBindingAttr(el, 'slot')\r\n        if (slotTarget) {\r\n            el.slotTarget = slotTarget === '\"\"' ? '\"default\"' : slotTarget\r\n            el.attrsMap = el.attrsMap || {}\r\n            el.attrsMap['slot'] = slotTarget\r\n            el.slotTargetDynamic = !!(el.attrsMap[':slot'] || el.attrsMap['v-bind:slot'])\r\n            if (!el.slotScope) {\r\n                addAttr(el, 'slot', slotTarget, getBindingAttr(el, 'slot'))\r\n            }\r\n        }\r\n    }\r\n\r\n    parseHTML(template, {\r\n         start(tagName, attributes) {\r\n            let parent = stack[stack.length - 1];\r\n            let element = createAstElement(tagName, attributes);\r\n            if (!root) {\r\n                root = element;\r\n            }\r\n            if (parent) {\r\n                element.parent = parent; // 当放入栈中时 继续父亲是谁\r\n                parent.children.push(element)\r\n            }\r\n            stack.push(element);\r\n        },\r\n    \r\n        end(tagName) {\r\n            const element = stack[stack.length - 1];\r\n            stack.length -= 1\r\n            currentParent = stack[stack.length - 1]\r\n            if (element.tag !== tagName) {\r\n                throw new Error('标签有误');\r\n            }\r\n            // debugger\r\n            closeElement(element)\r\n            // debugger\r\n        },\r\n    \r\n        chars(text) {\r\n            text = text.replace(/\\s/g, \"\");\r\n            let parent = stack[stack.length - 1];\r\n            if (text) {\r\n                parent.children.push({\r\n                    type: 3,\r\n                    text\r\n                })\r\n            }\r\n        }\r\n    })\r\n\r\n    return root\r\n}\r\n\r\n","import { generate } from './codegen/index';\r\nimport {parse} from './parser/index';\r\n\r\nexport function compileToFunction(template) {\r\n    let root = parse(template)\r\n    \r\n    // 生成代码 \r\n    let code = generate(root)\r\n    console.log('compileToFunction----code---', code)\r\n    let render = new Function(`with(this){return ${code}}`); // code 中会用到数据 数据在vm上\r\n    console.log('compiler----render----', render)\r\n    return render;\r\n    // render(){\r\n    //     return\r\n    // }\r\n    // html=> ast（只能描述语法 语法不存在的属性无法描述） => render函数 + (with + new Function) => 虚拟dom （增加额外的属性） => 生成真实dom\r\n}\r\n","import { hasOwn } from './utils'\r\nimport { defineReactive } from './observer/index'\r\n\r\nexport function initProvide(vm) {\r\n  const provide = vm.$options.provide\r\n  // console.log('inject----provide--', provide)\r\n  if (provide) {\r\n    vm._provided = typeof provide === 'function' ? provide.call(vm) : provide\r\n  }\r\n}\r\n\r\n\r\nexport function initInjections(vm) {\r\n  const result = resolveInject(vm.$options.inject, vm)\r\n  // console.log('inject---initInjections---result---', result)\r\n  if (result) {\r\n    Object.keys(result).forEach(key => {\r\n      defineReactive(vm, key, result[key])\r\n    })\r\n  }\r\n}\r\n\r\nexport function resolveInject(inject, vm) {\r\n  // debugger\r\n  if (inject) {\r\n    const result = Object.create(null)\r\n    // const keys = Object.keys(inject)\r\n    const keys = Reflect.ownKeys(inject)\r\n    // console.log('inject----resolveInject----result---', keys)\r\n\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i]\r\n      if (key === '__ob__') continue\r\n      const provideKey = inject[key]\r\n      let source = vm\r\n      while (source) {\r\n        if (source._provided && hasOwn(source._provided, provideKey)) {\r\n          result[inject[key]] = source._provided[provideKey]\r\n          break\r\n        }\r\n        source = source.$parent\r\n      }\r\n      if (!source) {\r\n        // console.log('inject---key---', inject, key)\r\n        if (key !== 'length' && 'default' in inject[key]) {\r\n          const provideDefault = inject[key].default\r\n          result[key] = typeof provideDefault === 'function'\r\n            ? provideDefault.call(vm)\r\n            : provideDefault\r\n        }\r\n      }\r\n    }\r\n\r\n    return result\r\n  }\r\n}","export default class VNode {\r\n  constructor(context, tag, data, key, children, text, componentOptions) {\r\n    this.context = context\r\n    this.tag = tag\r\n    this.data = data\r\n    this.key = key\r\n    this.children = children\r\n    this.text = text\r\n    this.componentOptions = componentOptions\r\n  }\r\n}","import {  isObject } from \"../utils\"\r\nimport VNode from \"./vnode\";\r\n\r\nexport function createComponent(context, tag, data, key, children, Ctor) {\r\n  const baseCtor = context.$options._base\r\n  if (isObject(Ctor)) {\r\n    Ctor = baseCtor.exend(Ctor)\r\n  }\r\n  data.hook = {\r\n    init(vnode) {\r\n      let child = vnode.componentInstance = new Ctor({_isComponent: true, parent: context, _parentVnode: vnode})\r\n\r\n      child.$mount()\r\n    }\r\n  }\r\n\r\n  return new VNode(context, `vue-component-${tag}`, data, key, undefined, undefined, {Ctor, children})\r\n}","import VNode from './vnode'\r\nimport { createComponent } from './create-component'\r\nimport { isReservedTag, isObject } from \"../utils\"\r\n\r\nexport function createElement (context, tag, data = {}, ...children) {\r\n  // TODO...\r\n\r\n  return _createElement(context, tag, data, children)\r\n}\r\n\r\nexport function _createElement(context, tag, data, children) {\r\n  let vnode\r\n  if (isReservedTag(tag)) {\r\n    vnode = new VNode(context, tag, data, data.key, children, undefined)\r\n  } else {\r\n    const Ctor = context.$options.components[tag]\r\n    return createComponent(context, tag, data, data.key, children, Ctor)\r\n  }\r\n  \r\n  return vnode\r\n}\r\n\r\nexport function createTextElement(context, text) {\r\n  return new VNode(context, undefined, undefined, undefined, undefined, text)\r\n}","// import { createElement, createTextElement } from \"./vdom/index\"\r\nimport { createElement, createTextElement } from './vdom/create-element'\r\n\r\nexport function installRenderHelpers (target) {\r\n  target._c = function() {\r\n    return createElement(this, ...arguments)\r\n  }\r\n\r\n  target._v = function (text) {\r\n    return createTextElement(this, text)\r\n  }\r\n\r\n  target._s = function(val) {\r\n    if (typeof val === 'object') return JSON.stringify(val)\r\n    return val\r\n  }\r\n\r\n  target._t = function(name) {\r\n    let nodes\r\n    // debugger\r\n    nodes = this.$slots[name]\r\n    return nodes\r\n  }\r\n}\r\n\r\nexport function resolveSlots(children, context) {\r\n  if (!children || !children.length) {\r\n    return {}\r\n  }\r\n  // debugger\r\n  const slots = {}\r\n  for (let i = 0, l = children.length; i < l; i++) {\r\n    const child = children[i]\r\n    const data = child.data\r\n    // if (data && data.slot) {\r\n    //   delete data.slot\r\n    // }\r\n\r\n    if (data && data.slot != null) {\r\n      const name = data.slot\r\n      const slot = (slots[name] || (slots[name] = []))\r\n      slot.push(child)\r\n    } else {\r\n      (slots.default || (slots.default = [])).push(child)\r\n    }\r\n  }\r\n\r\n  return slots\r\n}","\r\nimport { installRenderHelpers, resolveSlots } from './render-helpers'\r\n\r\n\r\nexport function initRender(vm) {\r\n  vm._vnode = null\r\n  // debugger\r\n  const options = vm.$options\r\n  const parentVnode = vm.$vnode = options._parentVnode\r\n  // const renderContext = parentVnode && parentVnode.context\r\n  // change...FIXME...\r\n  const renderContext = vm && vm.$parent\r\n  vm.$slots = resolveSlots(options._renderChildren, renderContext)\r\n}\r\n\r\n\r\nexport function renderMixin(Vue) {\r\n  // console.log('renderMixin---')\r\n installRenderHelpers(Vue.prototype)\r\n\r\n  Vue.prototype._render = function () {\r\n    const vm = this\r\n    let render = vm.$options.render\r\n    let vnode = render.call(vm)\r\n    return vnode\r\n  }\r\n}","import { initState } from './state'\r\nimport { initEvents } from './events'\r\nimport { callHook, mountComponent, initLifecycle } from \"./lifecycle\"\r\nimport { compileToFunction } from \"./compiler/index\";\r\nimport { mergeOptions } from './utils'\r\nimport { initInjections, initProvide } from './inject'\r\nimport { initRender } from './render'\r\n\r\nlet uid = 0\r\n\r\nexport function initMixin(Vue) {\r\n  // console.log('initMixin----')\r\n  Vue.prototype._init = function(options) {\r\n    const vm = this\r\n    vm._uid = uid++\r\n    if (options && options._isComponent) {\r\n      initInternalComponent(vm, options)\r\n    } else {\r\n      vm.$options = mergeOptions(vm.constructor.options, options)\r\n    }\r\n\r\n\r\n    // console.log('init---vm.$options---', vm.$options)\r\n    initLifecycle(vm)\r\n    initEvents(vm)\r\n    initRender(vm)\r\n    callHook(vm, 'beforeCreate')\r\n    // debugger\r\n    initInjections(vm)\r\n    initState(vm)\r\n    initProvide(vm)\r\n    callHook(vm, 'created')\r\n\r\n    if (vm.$options.el) {\r\n      // debugger\r\n      vm.$mount(vm.$options.el)\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    // console.log('$mount----el---', el)\r\n    const vm = this\r\n    const options = vm.$options\r\n    el = document.querySelector(el)\r\n    vm.$el = el\r\n    if (!options.render) {\r\n      let template = options.template\r\n      if (!template && el) {\r\n        template = el.outerHTML\r\n        // console.log('template---', template)\r\n      }\r\n      let render = compileToFunction(template)\r\n      options.render = render\r\n    }\r\n    // debugger\r\n    mountComponent(vm, el)\r\n  }\r\n}\r\n\r\nexport function initInternalComponent(vm, options) {\r\n  const opts = vm.$options = Object.create(vm.constructor.options)\r\n  // debugger\r\n  // console.log('vm---', vm, options)\r\n  const parentVnode = options._parentVnode\r\n  opts.parent = options.parent\r\n  opts._parentVnode = parentVnode\r\n  const vnodeComponentOptions = parentVnode.componentOptions\r\n  opts._renderChildren = vnodeComponentOptions.children\r\n}","import { mergeOptions } from '../utils'\r\n\r\nexport function initGlobalApi(Vue) {\r\n  Vue.options = {}\r\n  Vue.mixin = function(options) {\r\n    this.options = mergeOptions(this.options, options)\r\n    // console.log('initGlobal-----options----', this.options)\r\n    return this\r\n  }\r\n\r\n  Vue.options._base = Vue\r\n  Vue.options.components = {}\r\n  Vue.component = function (id, definition) {\r\n    definition = this.options._base.extend(definition)\r\n    // console.log('global-api----component---definition---', definition)\r\n    this.options.components[id] = definition\r\n  }\r\n\r\n  Vue.extend = function (opts) {\r\n    const Super = this\r\n    const Sub = function VueComponent(options) {\r\n      this._init(options)\r\n    }\r\n    Sub.prototype = Object.create(Super.prototype)\r\n    Sub.prototype.constructor = Sub\r\n    Sub.options = mergeOptions(Super.options, opts)\r\n    // console.log('global-api----extend----Sub.options---', Sub.options)\r\n    return Sub\r\n  }\r\n}","import { initMixin } from './init'\r\nimport { renderMixin } from './render'\r\nimport { lifecycleMixin } from \"./lifecycle\"\r\nimport { stateMixin } from './state'\r\nimport { eventsMixin } from './events'\r\nimport { initGlobalApi } from './global-api/index'\r\n\r\n\r\n\r\nfunction Vue(options) {\r\n  // console.log('Vue---')\r\n  this._init(options)\r\n}\r\n\r\ninitMixin(Vue)\r\neventsMixin(Vue)\r\nrenderMixin(Vue)\r\nlifecycleMixin(Vue)\r\nstateMixin(Vue)\r\n\r\ninitGlobalApi(Vue)\r\n\r\nexport default Vue"],"names":["isFunction","val","isObject","noop","toArray","list","i","length","ret","Array","hasOwnProperty","Object","prototype","hasOwn","obj","key","call","callbacks","flushCallbacks","forEach","cb","waiting","timer","timerFn","Promise","resolve","then","MutationObserver","textNode","document","createTextNode","observe","characterData","textContent","setImmediate","setTimeout","nextTick","push","lifeCycleHooks","strats","mergeHook","parentVal","childVal","concat","hook","components","options","create","mergeOptions","parent","child","mergeField","isReservedTag","str","reservedTag","includes","oldArrayPrototype","arrayMethods","methods","method","args","inserted","ob","__ob__","slice","observeArray","dep","notify","id","Dep","constructor","subs","depend","target","addDep","addSub","watcher","update","stack","pushTarget","popTarget","pop","Observer","data","defineProperty","value","enumerable","isArray","__proto__","walk","item","keys","defineReactive","dependArray","current","childOb","get","set","newValue","console","log","queue","has","flushSchedulerQueue","run","pending","queueWatcher","Watcher","vm","exprOrFn","user","lazy","dirty","getter","path","split","deps","depsId","Set","undefined","oldValue","add","evaluate","stateMixin","Vue","$watch","handler","initState","opts","$options","initData","initMethods","watch","initWatch","computed","initComputed","proxy","source","_data","bind","createWatcher","watchers","_computedWatchers","userDef","defineComputed","createComputedGetter","computedGetter","sharedProperty","initEvents","_events","eventsMixin","$on","event","fn","l","$once","on","$off","apply","arguments","cbs","splice","$emit","patch","oldVnode","vnode","createElm","nodeType","parentElm","parentNode","elm","insertBefore","nextSibling","removeChild","tag","el","replaceChild","text","patchProps","oldChildren","children","newChildren","patchChildren","appendChild","innerHTML","isSameVnode","newVnode","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","makeIndexByKey","reduce","memo","index","keysMap","moveIndex","moveNode","anchor","oldProps","newProps","newStyle","style","oldStyle","removeAttribute","styleName","setAttribute","createComponent","init","componentInstance","context","$el","createElement","lifecycleMixin","_update","$nextTick","initLifecycle","abstract","$parent","$children","$root","$refs","_watcher","_inactive","_directInactive","_isMounted","_isDestroyed","_isBeingDestroyed","mountComponent","updateComponent","_render","callHook","handlers","defaultTagRE","genProps","attrs","attr","name","styleObj","replace","JSON","stringify","gen","type","generate","test","tokens","match","lastIndex","exec","trim","join","genChildren","map","c","genData","slotTarget","genSlot","slotName","res","code","genElement","plain","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","advance","len","substring","parseStartTag","start","tagName","end","textEnd","indexOf","startTagMatch","endTagMatch","chars","addAttr","dynamic","dynamicAttrs","createAstElement","parse","template","root","currentParent","closeElement","element","processElement","processSlotContent","processSlotOutlet","getBindingAttr","attrsMap","slotTargetDynamic","slotScope","attributes","Error","compileToFunction","render","Function","initProvide","provide","_provided","initInjections","result","resolveInject","inject","Reflect","ownKeys","provideKey","provideDefault","default","VNode","componentOptions","Ctor","baseCtor","_base","exend","_isComponent","_parentVnode","$mount","_createElement","createTextElement","installRenderHelpers","_c","_v","_s","_t","nodes","$slots","resolveSlots","slots","slot","initRender","_vnode","$vnode","_renderChildren","renderMixin","uid","initMixin","_init","_uid","initInternalComponent","querySelector","outerHTML","parentVnode","vnodeComponentOptions","initGlobalApi","mixin","component","definition","extend","Super","Sub","VueComponent"],"mappings":"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"}